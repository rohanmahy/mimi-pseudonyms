<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>Some pseudonymous privacy flows for More Instant Messaging Interoperability (MIMI)</title>
<meta content="Rohan Mahy" name="author">
<meta content="
       The MIMI protocol has a baseline level of metadata privacy, which can be
made more private through the optional use of per-room pseudonyms. This
document describes three of many possible flows that use pseudonyms for
enhanced privacy. It also discusses some ways that spam and abuse prevention
mechanisms can work in conjunction with pseudonyms. 
    " name="description">
<meta content="xml2rfc 3.22.0" name="generator">
<meta content="metadata privacy" name="keyword">
<meta content="pseudonyms" name="keyword">
<meta content="pseudonymous" name="keyword">
<meta content="selective disclosure" name="keyword">
<meta content="draft-mahy-mimi-pseudonyms-latest" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.22.0
    Python 3.12.3
    ConfigArgParse 1.7
    google-i18n-address 3.1.0
    intervaltree 3.1.0
    Jinja2 3.1.4
    lxml 4.9.4
    platformdirs 4.2.2
    pycountry 22.3.5
    PyYAML 6.0.1
    requests 2.32.3
    setuptools 70.3.0
    wcwidth 0.2.13
-->
<link href="draft-mahy-mimi-pseudonyms.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}

@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Lora SemiBold'), local('Lora-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-semibold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Cabin Condensed';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Cabin Condensed SemiBold'), local('CabinCondensed-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/cabincondensed-semibold-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Cabin Condensed';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Cabin Condensed SemiBold'), local('CabinCondensed-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/cabincondensed-semibold-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Cabin Condensed';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Cabin Condensed SemiBold'), local('CabinCondensed-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/cabincondensed-semibold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

:root {
  color-scheme: light dark;
  --background-color: #fff;
  --text-color: #222;
  --title-color: #191919;
  --link-color: #2a6496;
  --highlight-color: #f9f9f9;
  --line-color: #eee;
  --pilcrow-weak: #ddd;
  --pilcrow-strong: #bbb;
  --small-font-size: 14.5px;
  --font-mono: 'Oxygen Mono', monospace;
  scrollbar-color: #bbb #eee;
}
body {
  max-width: 600px;
  margin: 75px auto;
  padding: 0 5px;
  color: var(--text-color);
  background-color: var(--background-color);
  font: 16px/22px "Lora", serif;
  scroll-behavior: smooth;
}

.ears {
  display: none;
}

/* headings */
h1, h2, h3, h4, h5, h6 {
  font-family: "Cabin Condensed", sans-serif;
  font-weight: 600;
  margin: 0.8em 0 0.3em;
  font-size-adjust: 0.5;
  color: var(--title-color);
}
h1#title {
  font-size: 32px;
  line-height: 40px;
  clear: both;
}
h1#title, h1#rfcnum {
  margin: 1.5em 0 0.2em;
}
h1#rfcnum + h1#title {
  margin: 0.2em 0;
}

h1, h2, h3 {
  font-size: 22px;
  line-height: 27px;
}
h4, h5, h6 {
  font-size: 20px;
  line-height: 24px;
}

/* general structure */
.author {
  padding-bottom: 0.3em;
}
#abstract+p {
  font-size: 18px;
  line-height: 24px;
}
#abstract+p code, #abstract+p samp, #abstract+p tt {
  font-size: 16px;
  line-height: 0;
}

p {
  padding: 0;
  margin: 0.5em 0;
  text-align: left;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignRight.art-text pre {
  padding: 0;
  width: auto;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
/* font-family isn't space-separated, but =~ will have to do */
svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
  font-family: var(--font-mono);
}
.alignCenter.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignCenter.art-text pre {
  padding: 0;
  width: auto;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 0.5em 2em;
}
:is(ol, ul) :is(ol, ul) {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
:is(ul, ol).compact, .ulCompact, .olCompact {
  line-height: 1;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
  clear: left;
  --indent: 3ch;
  /* --indent: attr(indent ch); not supported in any browser, but we can dream */
}
dl.olPercent {
  --indent: 5ch;
}
dl > dt {
  float: left;
  margin-right: 2ch;
  min-width: 8ch;
}
dl.dlNewline > dt {
  float: none;
}
dl > dd {
  margin-bottom: .8em;
  margin-left: var(--indent) !important; /* stupid element overrides */
  min-height: 2ex;
}
dl.olPercent > dt {
  min-width: calc(var(--indent) - 2ch);
}
:is(dl.compact, .dlCompact) > dd {
  margin-bottom: 0;
}
:is(dl.compact, .dlCompact) > dd > :is(:first-child, .break:first-child + *) {
  margin-top: 0;
}
:is(dl.compact, .dlCompact) > dd > :is(:last-child) {
  margin-bottom: 0;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0;
}
:is(dd, span).break {
  display: none;
}

/* links */
a, a[href].selfRef:hover {
  text-decoration: none;
}
a[href] {
  color: var(--link-color);
}
a[href].selfRef, .iref + a[href].internal {
  color: var(--text-color);
}
a[href]:hover {
  text-decoration: underline;
}
a[href].selfRef:hover {
  background-color: var(--highlight-color);
}
a.xref:is(.cite, .auto), :is(#status-of-memo, #copyright) a {
  white-space: nowrap;
}

/* Figures */
tt, code, pre {
  background-color: var(--highlight-color);
  font: 14px/22px var(--font-mono);
}
tt, code {
  /* changing the font for inline elements leads to different ascender
     and descender heights; as we want to retain baseline alignment,
     remove leading to avoid altering the final height of lines
     note: this fails if these blocks take an entire line,
     a different solution would be great */
  line-height: 0;
}
:is(h1, h2, h3, h4, h5, h6) :is(tt, code) {
  font-size: 84%;
}
pre {
  border: 1px solid var(--line-color);
  font-size: 13.5px;
  line-height: 16px;
  letter-spacing: -0.2px;
  margin: 5px;
  padding: 5px;
}
img {
  max-width: 100%;
}
figure {
  margin: 0.5em 0;
  padding: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption, caption {
  font-style: italic;
  margin: 0.5em 1.5em;
  text-align: left;
}
@media screen {
  /* Auto-collapse boilerplate. */
  :is(#status-of-memo, #copyright) p {
    margin: -2px 0;
    max-height: 0;
    transition: max-height 2s ease, margin 0.5s ease 0.5s;
    overflow: hidden;
  }
  :is(#status-of-memo, #copyright):hover p,
  :is(#status-of-memo, #copyright) h2:target ~ p {
    margin: 0.5em 0;
    max-height: 500px;
    overflow: auto;
  }
  pre, svg {
    display: inline-block;
    overflow-x: auto;
  }
  pre {
    max-width: 100%;
    width: calc(100% - 22px - 1em);
  }
  svg {
    max-width: calc(100% - 22px - 1em);
  }
  figure pre {
    display: block;
    width: calc(100% - 25px);
  }
  :is(pre, svg) + .pilcrow {
    display: inline-block;
    vertical-align: text-bottom;
    padding-bottom: 8px;
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 0 2em;
  font-style: italic;
}
blockquote {
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  max-width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
}
table.right {
  margin-left: auto;
}
table.center {
  margin-left: auto;
  margin-right: auto;
}
table.left {
  margin-right: auto;
}
thead, tbody {
  border: 1px solid var(--line-color);
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 5px 10px;
}
th {
  background-color: var(--line-color);
}
:is(tr:nth-child(2n), thead+tbody > tr:nth-child(2n+1)) > td {
  background-color: var(--background-color);
}
:is(tr:nth-child(2n+1), thead+tbody > tr:nth-child(2n)) > td {
  background-color: var(--highlight-color);
}
table caption {
  margin: 0;
  padding: 3px 0 3px 1em;
}
table p {
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  margin-left: 3px;
  opacity: 0.2;
  user-select: none;
}
a.pilcrow[href] { color: var(--pilcrow-weak); }
a.pilcrow[href]:hover { text-decoration: none; }
@media not print {
  :hover > a.pilcrow {
    opacity: 1;
  }
  a.pilcrow[href]:hover {
    color: var(--pilcrow-strong);
    background-color: transparent;
  }
}
@media print {
  a.pilcrow {
    display: none;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid var(--line-color);
}
.bcp14 {
  font-variant: small-caps;
  font-weight: 600;
  font-size: var(--small-font-size);
}
.role {
  font-variant: all-small-caps;
}
sub, sup {
  line-height: 1;
  font-size: 80%;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: var(--small-font-size);
  line-height: 18px;
  --identifier-width: 15ch;
}
#identifiers dt {
  width: var(--identifier-width);
  min-width: var(--identifier-width);
  clear: left;
  float: left;
  text-align: right;
  margin-right: 1ch;
}
#identifiers dd {
  margin: 0;
  margin-left: calc(1em + var(--identifier-width)) !important;
  min-width: 5em;
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #999;
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
#toc nav ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
#toc nav li {
  line-height: 1.3em;
  margin: 2px 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
#toc a.xref {
  white-space: normal;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 10ch;
  margin-right: 1.5ch;
}
.references dt:target::before {
  content: "⇒";
  width: 15px;
  margin: 0 10px 0 -25px;
}
.references dd {
  margin-left: 12ch !important;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
#rfc\.index\.index + ul {
  margin-left: 0;
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}
address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}
@media (min-width: 500px) {
  #authors-addresses > section {
    column-count: 2;
    column-gap: 20px;
  }
  #authors-addresses > section > h2 {
    column-span: all;
  }
  /* hack for break-inside: avoid-column */
  #authors-addresses address {
    display: inline-block;
    break-inside: avoid-column;
  }
}

.rfcEditorRemove p:first-of-type {
  font-style: italic;
}
.cref {
  background-color: rgba(249, 232, 105, 0.3);
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 929px) {
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 1px 0 0 0;
    margin: 0;
    border-bottom: 1px solid #ccc;
    opacity: 0.6;
  }
  #toc.active {
      opacity: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 2px 0 2px 6px;
    padding-right: 1em;
    font-size: 18px;
    line-height: 24px;
    min-width: 190px;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 8px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    background-color: var(--background-color);
    padding: 0.5em 1em 1em;
    overflow: auto;
    overscroll-behavior: contain;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
  #toc.active nav {
    display: block;
  }
  /* Make the collapsed ToC header render white on gray also when it's a link */
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
  #toc a.toplink {
    margin-top: 2px;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 930px) {
  body {
    padding-right: 360px;
    padding-right: calc(min(180px + 20%, 500px));
  }
  #toc {
    position: fixed;
    bottom: 0;
    right: 0;
    right: calc(50vw - 480px);
    width: 312px;
    margin: 0;
    padding: 0;
    z-index: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 2em;
    overflow: auto;
    overscroll-behavior: contain;
    scrollbar-width: thin;
  }
  #toc nav > ul  {
    margin-bottom: 2em;
  }
  #toc ul {
    margin: 0 0 0 4px;
    font-size: var(--small-font-size);
  }
  #toc ul :is(p, li) {
    margin: 2px 0;
    line-height: 22px;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {
    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre, .vcard {
    page-break-inside: avoid;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  :is(h2, h3, h4, h5, h6)+*, dd {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
  .toplink {
    display: none;
  }
}

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
}

/* Changes introduced to fix issues found during implementation */

/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}

/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin: 8px 0.5em 0;
}

/* Provide styling for table cell text alignment */
table .text-left {
  text-align: left;
}
table .text-center {
  text-align: center;
}
table .text-right {
  text-align: right;
}

/* Make the alternative author contact information look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 20em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Dark mode. */
@media (prefers-color-scheme: dark) {
:root {
  --background-color: #121212;
  --text-color: #f0f0f0;
  --title-color: #fff;
  --link-color: #4da4f0;
  --highlight-color: #282828;
  --line-color: #444;
  --pilcrow-weak: #444;
  --pilcrow-strong: #666;
  scrollbar-color: #777 #333;
}
}

/* SVG Trick: a prefix match works because only black and white are allowed */
svg :is([stroke="black"], [stroke^="#000"]) {
  stroke: var(--text-color);
}
svg :is([stroke="white"], [stroke^="#fff"]) {
  stroke: var(--background-color);
}
svg :is([fill="black"], [fill^="#000"], :not([fill])) {
  fill: var(--text-color);
}
svg :is([fill="white"], [fill^="#fff"]) {
  fill: var(--background-color);
}
</style>

</head>
<body class="xml2rfc">
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">MIMI pseudonym privacy flows</td>
<td class="right">August 2024</td>
</tr></thead>
<tfoot><tr>
<td class="left">Mahy</td>
<td class="center">Expires 20 February 2025</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">More Instant Messaging Interoperability</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-mahy-mimi-pseudonyms-latest</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2024-08-19" class="published">19 August 2024</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Informational</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2025-02-20">20 February 2025</time></dd>
<dt class="label-authors">Author:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">R. Mahy</div>
<div class="org">Rohan Mahy Consulting Services</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">Some pseudonymous privacy flows for More Instant Messaging Interoperability (MIMI)</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">The MIMI protocol has a baseline level of metadata privacy, which can be
made more private through the optional use of per-room pseudonyms. This
document describes three of many possible flows that use pseudonyms for
enhanced privacy. It also discusses some ways that spam and abuse prevention
mechanisms can work in conjunction with pseudonyms.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<section class="note rfcEditorRemove" id="section-note.1">
      <h2 id="name-about-this-document">
<a href="#name-about-this-document" class="section-name selfRef">About This Document</a>
      </h2>
<p id="section-note.1-1">This note is to be removed before publishing as an RFC.<a href="#section-note.1-1" class="pilcrow">¶</a></p>
<p id="section-note.1-2">
        The latest revision of this draft can be found at <span><a href="https://rohanmahy.github.io/mimi-pseudonyms/draft-mahy-mimi-pseudonyms.html">https://rohanmahy.github.io/mimi-pseudonyms/draft-mahy-mimi-pseudonyms.html</a></span>.
        Status information for this document may be found at <span><a href="https://datatracker.ietf.org/doc/draft-mahy-mimi-pseudonyms/">https://datatracker.ietf.org/doc/draft-mahy-mimi-pseudonyms/</a></span>.<a href="#section-note.1-2" class="pilcrow">¶</a></p>
<p id="section-note.1-3">
        Discussion of this document takes place on the
        More Instant Messaging Interoperability Working Group mailing list (<span><a href="mailto:mimi@ietf.org">mailto:mimi@ietf.org</a></span>),
        which is archived at <span><a href="https://mailarchive.ietf.org/arch/browse/mimi/">https://mailarchive.ietf.org/arch/browse/mimi/</a></span>.
        Subscribe at <span><a href="https://www.ietf.org/mailman/listinfo/mimi/">https://www.ietf.org/mailman/listinfo/mimi/</a></span>.<a href="#section-note.1-3" class="pilcrow">¶</a></p>
<p id="section-note.1-4">Source for this draft and an issue tracker can be found at
        <span><a href="https://github.com/rohanmahy/mimi-pseudonyms">https://github.com/rohanmahy/mimi-pseudonyms</a></span>.<a href="#section-note.1-4" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 20 February 2025.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2024 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="auto internal xref">1</a>.  <a href="#name-introduction" class="internal xref">Introduction</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1" class="keepWithNext"><a href="#section-2" class="auto internal xref">2</a>.  <a href="#name-conventions-and-definitions" class="internal xref">Conventions and Definitions</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="auto internal xref">3</a>.  <a href="#name-example-flows" class="internal xref">Example flows</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1" class="keepWithNext"><a href="#section-3.1" class="auto internal xref">3.1</a>.  <a href="#name-connection-flow" class="internal xref">Connection flow</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a href="#section-3.2" class="auto internal xref">3.2</a>.  <a href="#name-join-link-flow" class="internal xref">Join link flow</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3">
                <p id="section-toc.1-1.3.2.3.1"><a href="#section-3.3" class="auto internal xref">3.3</a>.  <a href="#name-knock-flow" class="internal xref">Knock flow</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="auto internal xref">4</a>.  <a href="#name-disclosing-additional-ident" class="internal xref">Disclosing additional identity properties in an application message</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="auto internal xref">4.1</a>.  <a href="#name-generic-mls-credential" class="internal xref">Generic MLS Credential</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="auto internal xref">4.2</a>.  <a href="#name-selective-disclosure-json-w" class="internal xref">Selective Disclosure JSON Web Tokens</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3">
                <p id="section-toc.1-1.4.2.3.1"><a href="#section-4.3" class="auto internal xref">4.3</a>.  <a href="#name-selective-disclosure-cbor-w" class="internal xref">Selective Disclosure CBOR Web Tokens</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="auto internal xref">5</a>.  <a href="#name-spam-and-abuse-prevention" class="internal xref">Spam and Abuse prevention</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="auto internal xref">5.1</a>.  <a href="#name-detection-signals" class="internal xref">Detection signals</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a href="#section-5.2" class="auto internal xref">5.2</a>.  <a href="#name-remedies" class="internal xref">Remedies</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3">
                <p id="section-toc.1-1.5.2.3.1"><a href="#section-5.3" class="auto internal xref">5.3</a>.  <a href="#name-correlating-anti-abuse-acti" class="internal xref">Correlating anti-abuse actions across multiple pseudonyms</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="auto internal xref">6</a>.  <a href="#name-implications-with-explicit-" class="internal xref">Implications with explicit consent mechanism</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="auto internal xref">7</a>.  <a href="#name-other-mechanism-needed" class="internal xref">Other mechanism needed</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="auto internal xref">8</a>.  <a href="#name-security-considerations" class="internal xref">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="auto internal xref">9</a>.  <a href="#name-iana-considerations" class="internal xref">IANA Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="auto internal xref">10</a>. <a href="#name-references" class="internal xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.1">
                <p id="section-toc.1-1.10.2.1.1"><a href="#section-10.1" class="auto internal xref">10.1</a>.  <a href="#name-normative-references" class="internal xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.2">
                <p id="section-toc.1-1.10.2.2.1"><a href="#section-10.2" class="auto internal xref">10.2</a>.  <a href="#name-informative-references" class="internal xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#appendix-A" class="auto internal xref"></a><a href="#name-acknowledgments" class="internal xref">Acknowledgments</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#appendix-B" class="auto internal xref"></a><a href="#name-authors-address" class="internal xref">Author's Address</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">The More Instant Messaging Interoperability (MIMI) protocol
<span>[<a href="#I-D.ietf-mimi-protocol" class="cite xref">I-D.ietf-mimi-protocol</a>]</span> defines a baseline mechanism of metadata privacy
with the following properties. Each local provider can know which of its
users are a participant in any given room, and the domain of the hub. The
hub provider knows the list of participants for each room that it manages.
Local/follower providers do not learn the identity (or even the domain of)
participants from other providers as those users send handshakes and
application messages, unless the provider happens to also be the hub for the
room.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">There is also consensus that user can join rooms using a unique pseudonym
per room. The MIMI endpoints provided by the hub operate equally well on
pseudonyms as on "real" identities. However, there are operational
implications related to authorization, consent, KeyPackage availability,
credentials, spam/abuse mitigation, and disclosure of the user's "real"
identity. As a result there are several possible ways of using pseudonyms
that are compatible with MIMI. This document describes three specific flows.
Other flows and other metadata privacy mechanisms are possible, some of
which also use pseudonyms, for example
<span>[<a href="#I-D.kohbrok-mimi-metadata-minimalization" class="cite xref">I-D.kohbrok-mimi-metadata-minimalization</a>]</span>.<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3">The flows described here include a connection-oriented flow, an out-of-band
join link flow, and a knock flow. A very high level summary of each flow
follows.<a href="#section-1-3" class="pilcrow">¶</a></p>
<p id="section-1-4">Connection flow:<a href="#section-1-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1-5.1">
          <p id="section-1-5.1.1">Each party obtains (typically single-use) pseudonyms<a href="#section-1-5.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-1-5.2">
          <p id="section-1-5.2.1">Alice finds Bob, and connects with him from one of her pseudonyms<a href="#section-1-5.2.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-1-5.3">
          <p id="section-1-5.3.1">Alice reveals her actual identity to Bob inside an end-to-end encrypted channel, and provides a second pseudonym<a href="#section-1-5.3.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-1-5.4">
          <p id="section-1-5.4.1">Bob connects to Alice from one of his pseudonyms to Alice's second pseudonym.<a href="#section-1-5.4.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<p id="section-1-6">Since the last step is based on a human delay which could vary from seconds
to years, the timing would be difficult to correlate between a pair of
providers with a large volume of traffic. If either provider has a very
small number of users, either provider could use traffic analysis to
associate the second room with Bob.<a href="#section-1-6" class="pilcrow">¶</a></p>
<p id="section-1-7">Out-of-band link flow:<a href="#section-1-7" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1-8.1">
          <p id="section-1-8.1.1">create a room link<a href="#section-1-8.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-1-8.2">
          <p id="section-1-8.2.1">distribute the link out-of-band<a href="#section-1-8.2.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-1-8.3">
          <p id="section-1-8.3.1">get the GroupInfo using the link<a href="#section-1-8.3.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-1-8.4">
          <p id="section-1-8.4.1">join the room<a href="#section-1-8.4.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-1-8.5">
          <p id="section-1-8.5.1">optionally reveal the "real" identity inside the room<a href="#section-1-8.5.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<p id="section-1-9">Knock flow:<a href="#section-1-9" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1-10.1">
          <p id="section-1-10.1.1">a new users Cathy wants to join an established room. she uses a pseudonym
to externally join the associated "knock" room.<a href="#section-1-10.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-1-10.2">
          <p id="section-1-10.2.1">Cathy provides a second pseudonym and KeyPackage inside the "knock room",
and immediately leaves the room<a href="#section-1-10.2.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-1-10.3">
          <p id="section-1-10.3.1">later, an administrator of the room decides to add Cathy to the room using
the KeyPackage provided by Cathy.<a href="#section-1-10.3.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<p id="section-1-11">This flow is substantially similar to the connection flow, except that Cathy
immediately leaves the "knock room", and the administrator adds Cathy to an
existing room (vs. Bob creating a new room).<a href="#section-1-11" class="pilcrow">¶</a></p>
</section>
</div>
<div id="conventions-and-definitions">
<section id="section-2">
      <h2 id="name-conventions-and-definitions">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-conventions-and-definitions" class="section-name selfRef">Conventions and Definitions</a>
      </h2>
<p id="section-2-1">The key words "<span class="bcp14">MUST</span>", "<span class="bcp14">MUST NOT</span>", "<span class="bcp14">REQUIRED</span>", "<span class="bcp14">SHALL</span>", "<span class="bcp14">SHALL NOT</span>", "<span class="bcp14">SHOULD</span>", "<span class="bcp14">SHOULD NOT</span>", "<span class="bcp14">RECOMMENDED</span>", "<span class="bcp14">NOT RECOMMENDED</span>",
"<span class="bcp14">MAY</span>", and "<span class="bcp14">OPTIONAL</span>" in this document are to be interpreted as
described in BCP 14 <span>[<a href="#RFC2119" class="cite xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="cite xref">RFC8174</a>]</span> when, and only when, they
appear in all capitals, as shown here.<a href="#section-2-1" class="pilcrow">¶</a></p>
<p id="section-2-2">This document uses MIMI terms defined in <span>[<a href="#I-D.ietf-mimi-arch" class="cite xref">I-D.ietf-mimi-arch</a>]</span> and
<span>[<a href="#I-D.ietf-mimi-protocol" class="cite xref">I-D.ietf-mimi-protocol</a>]</span>. MIMI uses the Messaging Layer Security (MLS)
protocol extensively; the document uses several MLS terms defined in
<span>[<a href="#RFC9420" class="cite xref">RFC9420</a>]</span>.<a href="#section-2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="example-flows">
<section id="section-3">
      <h2 id="name-example-flows">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-example-flows" class="section-name selfRef">Example flows</a>
      </h2>
<div id="connection-flow">
<section id="section-3.1">
        <h3 id="name-connection-flow">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-connection-flow" class="section-name selfRef">Connection flow</a>
        </h3>
<p id="section-3.1-1">Initially Alice and Bob both request a number of pseudonyms (and
associated MLS credentials). They may upload KeyPackages for these
pseudonyms.<a href="#section-3.1-1" class="pilcrow">¶</a></p>
<div id="section-3.1-2">
          <div class="alignLeft art-svg artwork" id="section-3.1-2.1">
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="224" width="448" viewBox="0 0 448 224" class="diagram" text-anchor="middle" font-family="monospace" font-size="13px" stroke-linecap="round">
              <path d="M 24,48 L 24,208" fill="none" stroke="black"></path>
              <path d="M 152,48 L 152,208" fill="none" stroke="black"></path>
              <path d="M 280,48 L 280,208" fill="none" stroke="black"></path>
              <path d="M 408,48 L 408,208" fill="none" stroke="black"></path>
              <path d="M 24,96 Q 26,92.8 28,96 Q 30,99.2 32,96 Q 34,92.8 36,96 Q 38,99.2 40,96 Q 42,92.8 44,96 Q 46,99.2 48,96 Q 50,92.8 52,96 Q 54,99.2 56,96 Q 58,92.8 60,96 Q 62,99.2 64,96 Q 66,92.8 68,96 Q 70,99.2 72,96 Q 74,92.8 76,96 Q 78,99.2 80,96 Q 82,92.8 84,96 Q 86,99.2 88,96 Q 90,92.8 92,96 Q 94,99.2 96,96 Q 98,92.8 100,96 Q 102,99.2 104,96 Q 106,92.8 108,96 Q 110,99.2 112,96 Q 114,92.8 116,96 Q 118,99.2 120,96 Q 122,92.8 124,96 Q 126,99.2 128,96 Q 130,92.8 132,96 Q 134,99.2 136,96 Q 138,92.8 140,96 Q 142,99.2 144,96" fill="none" stroke="black"></path>
              <path d="M 288,96 Q 290,92.8 292,96 Q 294,99.2 296,96 Q 298,92.8 300,96 Q 302,99.2 304,96 Q 306,92.8 308,96 Q 310,99.2 312,96 Q 314,92.8 316,96 Q 318,99.2 320,96 Q 322,92.8 324,96 Q 326,99.2 328,96 Q 330,92.8 332,96 Q 334,99.2 336,96 Q 338,92.8 340,96 Q 342,99.2 344,96 Q 346,92.8 348,96 Q 350,99.2 352,96 Q 354,92.8 356,96 Q 358,99.2 360,96 Q 362,92.8 364,96 Q 366,99.2 368,96 Q 370,92.8 372,96 Q 374,99.2 376,96 Q 378,92.8 380,96 Q 382,99.2 384,96 Q 386,92.8 388,96 Q 390,99.2 392,96 Q 394,92.8 396,96 Q 398,99.2 400,96 Q 402,92.8 404,96 Q 406,99.2 408,96" fill="none" stroke="black"></path>
              <path d="M 32,112 Q 34,108.8 36,112 Q 38,115.2 40,112 Q 42,108.8 44,112 Q 46,115.2 48,112 Q 50,108.8 52,112 Q 54,115.2 56,112 Q 58,108.8 60,112 Q 62,115.2 64,112 Q 66,108.8 68,112 Q 70,115.2 72,112 Q 74,108.8 76,112 Q 78,115.2 80,112 Q 82,108.8 84,112 Q 86,115.2 88,112 Q 90,108.8 92,112 Q 94,115.2 96,112 Q 98,108.8 100,112 Q 102,115.2 104,112 Q 106,108.8 108,112 Q 110,115.2 112,112 Q 114,108.8 116,112 Q 118,115.2 120,112 Q 122,108.8 124,112 Q 126,115.2 128,112 Q 130,108.8 132,112 Q 134,115.2 136,112 Q 138,108.8 140,112 Q 142,115.2 144,112 Q 146,108.8 148,112 Q 150,115.2 152,112" fill="none" stroke="black"></path>
              <path d="M 280,112 Q 282,108.8 284,112 Q 286,115.2 288,112 Q 290,108.8 292,112 Q 294,115.2 296,112 Q 298,108.8 300,112 Q 302,115.2 304,112 Q 306,108.8 308,112 Q 310,115.2 312,112 Q 314,108.8 316,112 Q 318,115.2 320,112 Q 322,108.8 324,112 Q 326,115.2 328,112 Q 330,108.8 332,112 Q 334,115.2 336,112 Q 338,108.8 340,112 Q 342,115.2 344,112 Q 346,108.8 348,112 Q 350,115.2 352,112 Q 354,108.8 356,112 Q 358,115.2 360,112 Q 362,108.8 364,112 Q 366,115.2 368,112 Q 370,108.8 372,112 Q 374,115.2 376,112 Q 378,108.8 380,112 Q 382,115.2 384,112 Q 386,108.8 388,112 Q 390,115.2 392,112 Q 394,108.8 396,112 Q 398,115.2 400,112" fill="none" stroke="black"></path>
              <path d="M 24,160 Q 26,156.8 28,160 Q 30,163.2 32,160 Q 34,156.8 36,160 Q 38,163.2 40,160 Q 42,156.8 44,160 Q 46,163.2 48,160 Q 50,156.8 52,160 Q 54,163.2 56,160 Q 58,156.8 60,160 Q 62,163.2 64,160 Q 66,156.8 68,160 Q 70,163.2 72,160 Q 74,156.8 76,160 Q 78,163.2 80,160 Q 82,156.8 84,160 Q 86,163.2 88,160 Q 90,156.8 92,160 Q 94,163.2 96,160 Q 98,156.8 100,160 Q 102,163.2 104,160 Q 106,156.8 108,160 Q 110,163.2 112,160 Q 114,156.8 116,160 Q 118,163.2 120,160 Q 122,156.8 124,160 Q 126,163.2 128,160 Q 130,156.8 132,160 Q 134,163.2 136,160 Q 138,156.8 140,160 Q 142,163.2 144,160" fill="none" stroke="black"></path>
              <path d="M 288,160 Q 290,156.8 292,160 Q 294,163.2 296,160 Q 298,156.8 300,160 Q 302,163.2 304,160 Q 306,156.8 308,160 Q 310,163.2 312,160 Q 314,156.8 316,160 Q 318,163.2 320,160 Q 322,156.8 324,160 Q 326,163.2 328,160 Q 330,156.8 332,160 Q 334,163.2 336,160 Q 338,156.8 340,160 Q 342,163.2 344,160 Q 346,156.8 348,160 Q 350,163.2 352,160 Q 354,156.8 356,160 Q 358,163.2 360,160 Q 362,156.8 364,160 Q 366,163.2 368,160 Q 370,156.8 372,160 Q 374,163.2 376,160 Q 378,156.8 380,160 Q 382,163.2 384,160 Q 386,156.8 388,160 Q 390,163.2 392,160 Q 394,156.8 396,160 Q 398,163.2 400,160 Q 402,156.8 404,160 Q 406,163.2 408,160" fill="none" stroke="black"></path>
              <polygon class="arrowhead" points="408,112 396,106.4 396,117.6" fill="black" transform="rotate(0,400,112)"></polygon>
              <polygon class="arrowhead" points="296,160 284,154.4 284,165.6" fill="black" transform="rotate(180,288,160)"></polygon>
              <polygon class="arrowhead" points="296,96 284,90.4 284,101.6" fill="black" transform="rotate(180,288,96)"></polygon>
              <polygon class="arrowhead" points="152,160 140,154.4 140,165.6" fill="black" transform="rotate(0,144,160)"></polygon>
              <polygon class="arrowhead" points="152,96 140,90.4 140,101.6" fill="black" transform="rotate(0,144,96)"></polygon>
              <polygon class="arrowhead" points="40,112 28,106.4 28,117.6" fill="black" transform="rotate(180,32,112)"></polygon>
              <g class="text">
                <text x="36" y="36">ClientA1</text>
                <text x="152" y="36">ServerA</text>
                <text x="280" y="36">ServerB</text>
                <text x="412" y="36">ClientB*</text>
                <text x="64" y="68">Request</text>
                <text x="320" y="68">Request</text>
                <text x="76" y="84">pseudonyms</text>
                <text x="332" y="84">pseudonyms</text>
                <text x="88" y="148">Store</text>
                <text x="128" y="148">KPs</text>
                <text x="344" y="148">Store</text>
                <text x="384" y="148">KPs</text>
                <text x="88" y="196">...</text>
                <text x="180" y="196">time</text>
                <text x="228" y="196">passes</text>
                <text x="344" y="196">...</text>
              </g>
            </svg><a href="#section-3.1-2.1" class="pilcrow">¶</a>
</div>
</div>
<p id="section-3.1-3">Alice decides to connect to Bob. She creates a room in which to
bootstrap her private connection with Bob. She uses one of her pseudonyms
as her identifier in the new room. Alice searches for Bob using his handle
identifier. She requests KeyPackages for Bob's real identity. Note that she
may need consent to fetch his KeyPackages (not shown), or Bob may grant
blanket consent for connection rooms. Alice adds Bob and Welcomes him to the
new temporary room.<a href="#section-3.1-3" class="pilcrow">¶</a></p>
<p id="section-3.1-4">Alice now sends Bob an application message revealing her actual identity,
another of her pseudonyms, and optionally a list of her KeyPackages from
that pseudonym. In all likelihood, the user Bob would not be presented
with any indication that Alice wants to connect until this point.<a href="#section-3.1-4" class="pilcrow">¶</a></p>
<div id="section-3.1-5">
          <div class="alignLeft art-svg artwork" id="section-3.1-5.1">
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="576" width="448" viewBox="0 0 448 576" class="diagram" text-anchor="middle" font-family="monospace" font-size="13px" stroke-linecap="round">
              <path d="M 24,48 L 24,560" fill="none" stroke="black"></path>
              <path d="M 152,48 L 152,560" fill="none" stroke="black"></path>
              <path d="M 280,48 L 280,560" fill="none" stroke="black"></path>
              <path d="M 408,48 L 408,560" fill="none" stroke="black"></path>
              <path d="M 24,80 Q 26,76.8 28,80 Q 30,83.2 32,80 Q 34,76.8 36,80 Q 38,83.2 40,80 Q 42,76.8 44,80 Q 46,83.2 48,80 Q 50,76.8 52,80 Q 54,83.2 56,80 Q 58,76.8 60,80 Q 62,83.2 64,80 Q 66,76.8 68,80 Q 70,83.2 72,80 Q 74,76.8 76,80 Q 78,83.2 80,80 Q 82,76.8 84,80 Q 86,83.2 88,80 Q 90,76.8 92,80 Q 94,83.2 96,80 Q 98,76.8 100,80 Q 102,83.2 104,80 Q 106,76.8 108,80 Q 110,83.2 112,80 Q 114,76.8 116,80 Q 118,83.2 120,80 Q 122,76.8 124,80 Q 126,83.2 128,80 Q 130,76.8 132,80 Q 134,83.2 136,80 Q 138,76.8 140,80 Q 142,83.2 144,80" fill="none" stroke="black"></path>
              <path d="M 24,128 Q 26,124.8 28,128 Q 30,131.2 32,128 Q 34,124.8 36,128 Q 38,131.2 40,128 Q 42,124.8 44,128 Q 46,131.2 48,128 Q 50,124.8 52,128 Q 54,131.2 56,128 Q 58,124.8 60,128 Q 62,131.2 64,128 Q 66,124.8 68,128 Q 70,131.2 72,128 Q 74,124.8 76,128 Q 78,131.2 80,128 Q 82,124.8 84,128 Q 86,131.2 88,128 Q 90,124.8 92,128 Q 94,131.2 96,128 Q 98,124.8 100,128 Q 102,131.2 104,128 Q 106,124.8 108,128 Q 110,131.2 112,128 Q 114,124.8 116,128 Q 118,131.2 120,128 Q 122,124.8 124,128 Q 126,131.2 128,128 Q 130,124.8 132,128 Q 134,131.2 136,128 Q 138,124.8 140,128 Q 142,131.2 144,128" fill="none" stroke="black"></path>
              <path d="M 152,160 L 272,160" fill="none" stroke="black"></path>
              <path d="M 160,192 L 280,192" fill="none" stroke="black"></path>
              <path d="M 24,224 Q 26,220.8 28,224 Q 30,227.2 32,224 Q 34,220.8 36,224 Q 38,227.2 40,224 Q 42,220.8 44,224 Q 46,227.2 48,224 Q 50,220.8 52,224 Q 54,227.2 56,224 Q 58,220.8 60,224 Q 62,227.2 64,224 Q 66,220.8 68,224 Q 70,227.2 72,224 Q 74,220.8 76,224 Q 78,227.2 80,224 Q 82,220.8 84,224 Q 86,227.2 88,224 Q 90,220.8 92,224 Q 94,227.2 96,224 Q 98,220.8 100,224 Q 102,227.2 104,224 Q 106,220.8 108,224 Q 110,227.2 112,224 Q 114,220.8 116,224 Q 118,227.2 120,224 Q 122,220.8 124,224 Q 126,227.2 128,224 Q 130,220.8 132,224 Q 134,227.2 136,224 Q 138,220.8 140,224 Q 142,227.2 144,224" fill="none" stroke="black"></path>
              <path d="M 152,240 L 272,240" fill="none" stroke="black"></path>
              <path d="M 160,272 L 280,272" fill="none" stroke="black"></path>
              <path d="M 32,288 Q 34,284.8 36,288 Q 38,291.2 40,288 Q 42,284.8 44,288 Q 46,291.2 48,288 Q 50,284.8 52,288 Q 54,291.2 56,288 Q 58,284.8 60,288 Q 62,291.2 64,288 Q 66,284.8 68,288 Q 70,291.2 72,288 Q 74,284.8 76,288 Q 78,291.2 80,288 Q 82,284.8 84,288 Q 86,291.2 88,288 Q 90,284.8 92,288 Q 94,291.2 96,288 Q 98,284.8 100,288 Q 102,291.2 104,288 Q 106,284.8 108,288 Q 110,291.2 112,288 Q 114,284.8 116,288 Q 118,291.2 120,288 Q 122,284.8 124,288 Q 126,291.2 128,288 Q 130,284.8 132,288 Q 134,291.2 136,288 Q 138,284.8 140,288 Q 142,291.2 144,288 Q 146,284.8 148,288 Q 150,291.2 152,288" fill="none" stroke="black"></path>
              <path d="M 24,336 Q 26,332.8 28,336 Q 30,339.2 32,336 Q 34,332.8 36,336 Q 38,339.2 40,336 Q 42,332.8 44,336 Q 46,339.2 48,336 Q 50,332.8 52,336 Q 54,339.2 56,336 Q 58,332.8 60,336 Q 62,339.2 64,336 Q 66,332.8 68,336 Q 70,339.2 72,336 Q 74,332.8 76,336 Q 78,339.2 80,336 Q 82,332.8 84,336 Q 86,339.2 88,336 Q 90,332.8 92,336 Q 94,339.2 96,336 Q 98,332.8 100,336 Q 102,339.2 104,336 Q 106,332.8 108,336 Q 110,339.2 112,336 Q 114,332.8 116,336 Q 118,339.2 120,336 Q 122,332.8 124,336 Q 126,339.2 128,336 Q 130,332.8 132,336 Q 134,339.2 136,336 Q 138,332.8 140,336 Q 142,339.2 144,336" fill="none" stroke="black"></path>
              <path d="M 32,368 Q 34,364.8 36,368 Q 38,371.2 40,368 Q 42,364.8 44,368 Q 46,371.2 48,368 Q 50,364.8 52,368 Q 54,371.2 56,368 Q 58,364.8 60,368 Q 62,371.2 64,368 Q 66,364.8 68,368 Q 70,371.2 72,368 Q 74,364.8 76,368 Q 78,371.2 80,368 Q 82,364.8 84,368 Q 86,371.2 88,368 Q 90,364.8 92,368 Q 94,371.2 96,368 Q 98,364.8 100,368 Q 102,371.2 104,368 Q 106,364.8 108,368 Q 110,371.2 112,368 Q 114,364.8 116,368 Q 118,371.2 120,368 Q 122,364.8 124,368 Q 126,371.2 128,368 Q 130,364.8 132,368 Q 134,371.2 136,368 Q 138,364.8 140,368 Q 142,371.2 144,368 Q 146,364.8 148,368 Q 150,371.2 152,368" fill="none" stroke="black"></path>
              <path d="M 152,368 L 272,368" fill="none" stroke="black"></path>
              <path d="M 160,400 L 280,400" fill="none" stroke="black"></path>
              <path d="M 280,400 Q 282,396.8 284,400 Q 286,403.2 288,400 Q 290,396.8 292,400 Q 294,403.2 296,400 Q 298,396.8 300,400 Q 302,403.2 304,400 Q 306,396.8 308,400 Q 310,403.2 312,400 Q 314,396.8 316,400 Q 318,403.2 320,400 Q 322,396.8 324,400 Q 326,403.2 328,400 Q 330,396.8 332,400 Q 334,403.2 336,400 Q 338,396.8 340,400 Q 342,403.2 344,400 Q 346,396.8 348,400 Q 350,403.2 352,400 Q 354,396.8 356,400 Q 358,403.2 360,400 Q 362,396.8 364,400 Q 366,403.2 368,400 Q 370,396.8 372,400 Q 374,403.2 376,400 Q 378,396.8 380,400 Q 382,403.2 384,400 Q 386,396.8 388,400 Q 390,403.2 392,400 Q 394,396.8 396,400 Q 398,403.2 400,400" fill="none" stroke="black"></path>
              <path d="M 24,416 Q 26,412.8 28,416 Q 30,419.2 32,416 Q 34,412.8 36,416 Q 38,419.2 40,416 Q 42,412.8 44,416 Q 46,419.2 48,416 Q 50,412.8 52,416 Q 54,419.2 56,416 Q 58,412.8 60,416 Q 62,419.2 64,416 Q 66,412.8 68,416 Q 70,419.2 72,416 Q 74,412.8 76,416 Q 78,419.2 80,416 Q 82,412.8 84,416 Q 86,419.2 88,416 Q 90,412.8 92,416 Q 94,419.2 96,416 Q 98,412.8 100,416 Q 102,419.2 104,416 Q 106,412.8 108,416 Q 110,419.2 112,416 Q 114,412.8 116,416 Q 118,419.2 120,416 Q 122,412.8 124,416 Q 126,419.2 128,416 Q 130,412.8 132,416 Q 134,419.2 136,416 Q 138,412.8 140,416 Q 142,419.2 144,416" fill="none" stroke="black"></path>
              <path d="M 152,448 L 272,448" fill="none" stroke="black"></path>
              <path d="M 160,480 L 280,480" fill="none" stroke="black"></path>
              <path d="M 280,512 Q 282,508.8 284,512 Q 286,515.2 288,512 Q 290,508.8 292,512 Q 294,515.2 296,512 Q 298,508.8 300,512 Q 302,515.2 304,512 Q 306,508.8 308,512 Q 310,515.2 312,512 Q 314,508.8 316,512 Q 318,515.2 320,512 Q 322,508.8 324,512 Q 326,515.2 328,512 Q 330,508.8 332,512 Q 334,515.2 336,512 Q 338,508.8 340,512 Q 342,515.2 344,512 Q 346,508.8 348,512 Q 350,515.2 352,512 Q 354,508.8 356,512 Q 358,515.2 360,512 Q 362,508.8 364,512 Q 366,515.2 368,512 Q 370,508.8 372,512 Q 374,515.2 376,512 Q 378,508.8 380,512 Q 382,515.2 384,512 Q 386,508.8 388,512 Q 390,515.2 392,512 Q 394,508.8 396,512 Q 398,515.2 400,512" fill="none" stroke="black"></path>
              <polygon class="arrowhead" points="408,512 396,506.4 396,517.6" fill="black" transform="rotate(0,400,512)"></polygon>
              <polygon class="arrowhead" points="408,400 396,394.4 396,405.6" fill="black" transform="rotate(0,400,400)"></polygon>
              <polygon class="arrowhead" points="280,448 268,442.4 268,453.6" fill="black" transform="rotate(0,272,448)"></polygon>
              <polygon class="arrowhead" points="280,368 268,362.4 268,373.6" fill="black" transform="rotate(0,272,368)"></polygon>
              <polygon class="arrowhead" points="280,240 268,234.4 268,245.6" fill="black" transform="rotate(0,272,240)"></polygon>
              <polygon class="arrowhead" points="280,160 268,154.4 268,165.6" fill="black" transform="rotate(0,272,160)"></polygon>
              <polygon class="arrowhead" points="168,480 156,474.4 156,485.6" fill="black" transform="rotate(180,160,480)"></polygon>
              <polygon class="arrowhead" points="168,400 156,394.4 156,405.6" fill="black" transform="rotate(180,160,400)"></polygon>
              <polygon class="arrowhead" points="168,272 156,266.4 156,277.6" fill="black" transform="rotate(180,160,272)"></polygon>
              <polygon class="arrowhead" points="168,192 156,186.4 156,197.6" fill="black" transform="rotate(180,160,192)"></polygon>
              <polygon class="arrowhead" points="152,416 140,410.4 140,421.6" fill="black" transform="rotate(0,144,416)"></polygon>
              <polygon class="arrowhead" points="152,336 140,330.4 140,341.6" fill="black" transform="rotate(0,144,336)"></polygon>
              <polygon class="arrowhead" points="152,224 140,218.4 140,229.6" fill="black" transform="rotate(0,144,224)"></polygon>
              <polygon class="arrowhead" points="152,128 140,122.4 140,133.6" fill="black" transform="rotate(0,144,128)"></polygon>
              <polygon class="arrowhead" points="152,80 140,74.4 140,85.6" fill="black" transform="rotate(0,144,80)"></polygon>
              <polygon class="arrowhead" points="40,368 28,362.4 28,373.6" fill="black" transform="rotate(180,32,368)"></polygon>
              <polygon class="arrowhead" points="40,288 28,282.4 28,293.6" fill="black" transform="rotate(180,32,288)"></polygon>
              <g class="text">
                <text x="36" y="36">ClientA1</text>
                <text x="152" y="36">ServerA</text>
                <text x="280" y="36">ServerB</text>
                <text x="412" y="36">ClientB*</text>
                <text x="60" y="68">Create</text>
                <text x="108" y="68">room</text>
                <text x="48" y="100">Add</text>
                <text x="96" y="100">Alice's</text>
                <text x="56" y="116">other</text>
                <text x="112" y="116">clients</text>
                <text x="196" y="148">/idQuery</text>
                <text x="232" y="180">200</text>
                <text x="260" y="180">OK</text>
                <text x="64" y="212">Request</text>
                <text x="112" y="212">KPs</text>
                <text x="212" y="228">/keyMaterial</text>
                <text x="232" y="260">200</text>
                <text x="260" y="260">OK</text>
                <text x="80" y="276">connect</text>
                <text x="128" y="276">KPs</text>
                <text x="64" y="324">Commit,</text>
                <text x="116" y="324">etc.</text>
                <text x="108" y="356">Accepted</text>
                <text x="192" y="356">/notify</text>
                <text x="232" y="388">200</text>
                <text x="260" y="388">OK</text>
                <text x="324" y="388">Welcome,</text>
                <text x="380" y="388">Tree</text>
                <text x="104" y="404">Message</text>
                <text x="192" y="436">/notify</text>
                <text x="232" y="468">200</text>
                <text x="260" y="468">OK</text>
                <text x="324" y="500">AliceID,</text>
                <text x="376" y="500">KPs</text>
                <text x="88" y="548">...</text>
                <text x="180" y="548">time</text>
                <text x="228" y="548">passes</text>
                <text x="344" y="548">...</text>
              </g>
            </svg><a href="#section-3.1-5.1" class="pilcrow">¶</a>
</div>
</div>
<p id="section-3.1-6">At some point, Bob accepts Alice's connection request. Bob creates
a new room using one of his pseudonyms. Bob adds Alice's clients to the room
using the provided KeyPackages. Bob can also add the rest of his clients at
the same time, assuming that Bob has a way to get KeyPackages securely among
his clients. Bob then sends a message to Alice. The hub sees a room between
two pseudonyms.<a href="#section-3.1-6" class="pilcrow">¶</a></p>
<div id="section-3.1-7">
          <div class="alignLeft art-svg artwork" id="section-3.1-7.1">
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="272" width="480" viewBox="0 0 480 272" class="diagram" text-anchor="middle" font-family="monospace" font-size="13px" stroke-linecap="round">
              <path d="M 24,48 L 24,256" fill="none" stroke="black"></path>
              <path d="M 152,48 L 152,256" fill="none" stroke="black"></path>
              <path d="M 280,48 L 280,256" fill="none" stroke="black"></path>
              <path d="M 408,48 L 408,256" fill="none" stroke="black"></path>
              <path d="M 288,96 Q 290,92.8 292,96 Q 294,99.2 296,96 Q 298,92.8 300,96 Q 302,99.2 304,96 Q 306,92.8 308,96 Q 310,99.2 312,96 Q 314,92.8 316,96 Q 318,99.2 320,96 Q 322,92.8 324,96 Q 326,99.2 328,96 Q 330,92.8 332,96 Q 334,99.2 336,96 Q 338,92.8 340,96 Q 342,99.2 344,96 Q 346,92.8 348,96 Q 350,99.2 352,96 Q 354,92.8 356,96 Q 358,99.2 360,96 Q 362,92.8 364,96 Q 366,99.2 368,96 Q 370,92.8 372,96 Q 374,99.2 376,96 Q 378,92.8 380,96 Q 382,99.2 384,96 Q 386,92.8 388,96 Q 390,99.2 392,96 Q 394,92.8 396,96 Q 398,99.2 400,96 Q 402,92.8 404,96 Q 406,99.2 408,96" fill="none" stroke="black"></path>
              <path d="M 288,144 Q 290,140.8 292,144 Q 294,147.2 296,144 Q 298,140.8 300,144 Q 302,147.2 304,144 Q 306,140.8 308,144 Q 310,147.2 312,144 Q 314,140.8 316,144 Q 318,147.2 320,144 Q 322,140.8 324,144 Q 326,147.2 328,144 Q 330,140.8 332,144 Q 334,147.2 336,144 Q 338,140.8 340,144 Q 342,147.2 344,144 Q 346,140.8 348,144 Q 350,147.2 352,144 Q 354,140.8 356,144 Q 358,147.2 360,144 Q 362,140.8 364,144 Q 366,147.2 368,144 Q 370,140.8 372,144 Q 374,147.2 376,144 Q 378,140.8 380,144 Q 382,147.2 384,144 Q 386,140.8 388,144 Q 390,147.2 392,144 Q 394,140.8 396,144 Q 398,147.2 400,144 Q 402,140.8 404,144 Q 406,147.2 408,144" fill="none" stroke="black"></path>
              <path d="M 160,176 L 280,176" fill="none" stroke="black"></path>
              <path d="M 32,192 Q 34,188.8 36,192 Q 38,195.2 40,192 Q 42,188.8 44,192 Q 46,195.2 48,192 Q 50,188.8 52,192 Q 54,195.2 56,192 Q 58,188.8 60,192 Q 62,195.2 64,192 Q 66,188.8 68,192 Q 70,195.2 72,192 Q 74,188.8 76,192 Q 78,195.2 80,192 Q 82,188.8 84,192 Q 86,195.2 88,192 Q 90,188.8 92,192 Q 94,195.2 96,192 Q 98,188.8 100,192 Q 102,195.2 104,192 Q 106,188.8 108,192 Q 110,195.2 112,192 Q 114,188.8 116,192 Q 118,195.2 120,192 Q 122,188.8 124,192 Q 126,195.2 128,192 Q 130,188.8 132,192 Q 134,195.2 136,192 Q 138,188.8 140,192 Q 142,195.2 144,192 Q 146,188.8 148,192 Q 150,195.2 152,192" fill="none" stroke="black"></path>
              <path d="M 288,208 Q 290,204.8 292,208 Q 294,211.2 296,208 Q 298,204.8 300,208 Q 302,211.2 304,208 Q 306,204.8 308,208 Q 310,211.2 312,208 Q 314,204.8 316,208 Q 318,211.2 320,208 Q 322,204.8 324,208 Q 326,211.2 328,208 Q 330,204.8 332,208 Q 334,211.2 336,208 Q 338,204.8 340,208 Q 342,211.2 344,208 Q 346,204.8 348,208 Q 350,211.2 352,208 Q 354,204.8 356,208 Q 358,211.2 360,208 Q 362,204.8 364,208 Q 366,211.2 368,208 Q 370,204.8 372,208 Q 374,211.2 376,208 Q 378,204.8 380,208 Q 382,211.2 384,208 Q 386,204.8 388,208 Q 390,211.2 392,208 Q 394,204.8 396,208 Q 398,211.2 400,208 Q 402,204.8 404,208 Q 406,211.2 408,208" fill="none" stroke="black"></path>
              <path d="M 160,224 L 280,224" fill="none" stroke="black"></path>
              <path d="M 32,240 Q 34,236.8 36,240 Q 38,243.2 40,240 Q 42,236.8 44,240 Q 46,243.2 48,240 Q 50,236.8 52,240 Q 54,243.2 56,240 Q 58,236.8 60,240 Q 62,243.2 64,240 Q 66,236.8 68,240 Q 70,243.2 72,240 Q 74,236.8 76,240 Q 78,243.2 80,240 Q 82,236.8 84,240 Q 86,243.2 88,240 Q 90,236.8 92,240 Q 94,243.2 96,240 Q 98,236.8 100,240 Q 102,243.2 104,240 Q 106,236.8 108,240 Q 110,243.2 112,240 Q 114,236.8 116,240 Q 118,243.2 120,240 Q 122,236.8 124,240 Q 126,243.2 128,240 Q 130,236.8 132,240 Q 134,243.2 136,240 Q 138,236.8 140,240 Q 142,243.2 144,240 Q 146,236.8 148,240 Q 150,243.2 152,240" fill="none" stroke="black"></path>
              <polygon class="arrowhead" points="296,208 284,202.4 284,213.6" fill="black" transform="rotate(180,288,208)"></polygon>
              <polygon class="arrowhead" points="296,144 284,138.4 284,149.6" fill="black" transform="rotate(180,288,144)"></polygon>
              <polygon class="arrowhead" points="296,96 284,90.4 284,101.6" fill="black" transform="rotate(180,288,96)"></polygon>
              <polygon class="arrowhead" points="168,224 156,218.4 156,229.6" fill="black" transform="rotate(180,160,224)"></polygon>
              <polygon class="arrowhead" points="168,176 156,170.4 156,181.6" fill="black" transform="rotate(180,160,176)"></polygon>
              <polygon class="arrowhead" points="40,240 28,234.4 28,245.6" fill="black" transform="rotate(180,32,240)"></polygon>
              <polygon class="arrowhead" points="40,192 28,186.4 28,197.6" fill="black" transform="rotate(180,32,192)"></polygon>
              <g class="text">
                <text x="36" y="36">ClientA1</text>
                <text x="152" y="36">ServerA</text>
                <text x="280" y="36">ServerB</text>
                <text x="412" y="36">ClientB*</text>
                <text x="432" y="68">Bob</text>
                <text x="332" y="84">Create</text>
                <text x="380" y="84">room</text>
                <text x="448" y="84">accepts</text>
                <text x="320" y="132">Commit,</text>
                <text x="372" y="132">etc.</text>
                <text x="240" y="164">/notify</text>
                <text x="68" y="180">Welcome,</text>
                <text x="124" y="180">Tree</text>
                <text x="328" y="196">Message</text>
                <text x="240" y="212">/notify</text>
                <text x="64" y="228">Message</text>
              </g>
            </svg><a href="#section-3.1-7.1" class="pilcrow">¶</a>
</div>
</div>
<p id="section-3.1-8">Alice eventually destroys the bootstrap room, for example after a random delay (not shown).<a href="#section-3.1-8" class="pilcrow">¶</a></p>
<p id="section-3.1-9">Alice and Bob can add each other to additional rooms by sending an
application message with a join link, as shown in the next flow.<a href="#section-3.1-9" class="pilcrow">¶</a></p>
<p id="section-3.1-10">The connection flow may be useful when the sender wants to initially
establish connectivity but does not have an out-of-band or third-party
channel to the receiver. On providers with a low volume of flows or when
relatively few flows use pseudonyms, this flow is vulnerable to timing
analysis. Between a pair of providers with large volumes of new rooms using
pseudonyms, this approach can be very effective. This flow has the advantage
that the initiator can validate the real identity of the receiver before
establishing any type of communication. This may be useful when contacting
a known journalist, law-enforcement agent, rights-advocacy group, or ombudsperson.<a href="#section-3.1-10" class="pilcrow">¶</a></p>
</section>
</div>
<div id="join-link-flow">
<section id="section-3.2">
        <h3 id="name-join-link-flow">
<a href="#section-3.2" class="section-number selfRef">3.2. </a><a href="#name-join-link-flow" class="section-name selfRef">Join link flow</a>
        </h3>
<p id="section-3.2-1">The join link flow is useful when two parties meet in person, have another
communications channel (possibly a different MIMI room), or each is
introduced via a trusted third-party over separate (typically secure)
communications channels.<a href="#section-3.2-1" class="pilcrow">¶</a></p>
<p id="section-3.2-2">This flow begins with Alice creating a new room from one of her pseudonyms,
adding her own clients to it, and the creating a join link. Alice needs to
have permissions to create a join link for this step. Alice then sends the
join link out-of-band to Bob. This could include showing a QR code to Bob,
or sending it to a trusted third-party to give to Bob.<a href="#section-3.2-2" class="pilcrow">¶</a></p>
<div id="section-3.2-3">
          <div class="alignLeft art-svg artwork" id="section-3.2-3.1">
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="288" width="448" viewBox="0 0 448 288" class="diagram" text-anchor="middle" font-family="monospace" font-size="13px" stroke-linecap="round">
              <path d="M 24,48 L 24,272" fill="none" stroke="black"></path>
              <path d="M 152,48 L 152,208" fill="none" stroke="black"></path>
              <path d="M 152,240 L 152,272" fill="none" stroke="black"></path>
              <path d="M 280,48 L 280,208" fill="none" stroke="black"></path>
              <path d="M 280,240 L 280,272" fill="none" stroke="black"></path>
              <path d="M 408,48 L 408,272" fill="none" stroke="black"></path>
              <path d="M 24,80 Q 26,76.8 28,80 Q 30,83.2 32,80 Q 34,76.8 36,80 Q 38,83.2 40,80 Q 42,76.8 44,80 Q 46,83.2 48,80 Q 50,76.8 52,80 Q 54,83.2 56,80 Q 58,76.8 60,80 Q 62,83.2 64,80 Q 66,76.8 68,80 Q 70,83.2 72,80 Q 74,76.8 76,80 Q 78,83.2 80,80 Q 82,76.8 84,80 Q 86,83.2 88,80 Q 90,76.8 92,80 Q 94,83.2 96,80 Q 98,76.8 100,80 Q 102,83.2 104,80 Q 106,76.8 108,80 Q 110,83.2 112,80 Q 114,76.8 116,80 Q 118,83.2 120,80 Q 122,76.8 124,80 Q 126,83.2 128,80 Q 130,76.8 132,80 Q 134,83.2 136,80 Q 138,76.8 140,80 Q 142,83.2 144,80" fill="none" stroke="black"></path>
              <path d="M 24,128 Q 26,124.8 28,128 Q 30,131.2 32,128 Q 34,124.8 36,128 Q 38,131.2 40,128 Q 42,124.8 44,128 Q 46,131.2 48,128 Q 50,124.8 52,128 Q 54,131.2 56,128 Q 58,124.8 60,128 Q 62,131.2 64,128 Q 66,124.8 68,128 Q 70,131.2 72,128 Q 74,124.8 76,128 Q 78,131.2 80,128 Q 82,124.8 84,128 Q 86,131.2 88,128 Q 90,124.8 92,128 Q 94,131.2 96,128 Q 98,124.8 100,128 Q 102,131.2 104,128 Q 106,124.8 108,128 Q 110,131.2 112,128 Q 114,124.8 116,128 Q 118,131.2 120,128 Q 122,124.8 124,128 Q 126,131.2 128,128 Q 130,124.8 132,128 Q 134,131.2 136,128 Q 138,124.8 140,128 Q 142,131.2 144,128" fill="none" stroke="black"></path>
              <path d="M 24,176 Q 26,172.8 28,176 Q 30,179.2 32,176 Q 34,172.8 36,176 Q 38,179.2 40,176 Q 42,172.8 44,176 Q 46,179.2 48,176 Q 50,172.8 52,176 Q 54,179.2 56,176 Q 58,172.8 60,176 Q 62,179.2 64,176 Q 66,172.8 68,176 Q 70,179.2 72,176 Q 74,172.8 76,176 Q 78,179.2 80,176 Q 82,172.8 84,176 Q 86,179.2 88,176 Q 90,172.8 92,176 Q 94,179.2 96,176 Q 98,172.8 100,176 Q 102,179.2 104,176 Q 106,172.8 108,176 Q 110,179.2 112,176 Q 114,172.8 116,176 Q 118,179.2 120,176 Q 122,172.8 124,176 Q 126,179.2 128,176 Q 130,172.8 132,176 Q 134,179.2 136,176 Q 138,172.8 140,176 Q 142,179.2 144,176" fill="none" stroke="black"></path>
              <path d="M 24,222 L 400,222" fill="none" stroke="black"></path>
              <path d="M 24,226 L 400,226" fill="none" stroke="black"></path>
              <polygon class="arrowhead" points="408,224 396,218.4 396,229.6" fill="black" transform="rotate(0,400,224)"></polygon>
              <polygon class="arrowhead" points="152,176 140,170.4 140,181.6" fill="black" transform="rotate(0,144,176)"></polygon>
              <polygon class="arrowhead" points="152,128 140,122.4 140,133.6" fill="black" transform="rotate(0,144,128)"></polygon>
              <polygon class="arrowhead" points="152,80 140,74.4 140,85.6" fill="black" transform="rotate(0,144,80)"></polygon>
              <g class="text">
                <text x="36" y="36">ClientA1</text>
                <text x="152" y="36">ServerA</text>
                <text x="280" y="36">ServerB</text>
                <text x="412" y="36">ClientB*</text>
                <text x="60" y="68">Create</text>
                <text x="108" y="68">room</text>
                <text x="48" y="100">Add</text>
                <text x="96" y="100">Alice's</text>
                <text x="56" y="116">other</text>
                <text x="112" y="116">clients</text>
                <text x="60" y="148">Create</text>
                <text x="108" y="148">join</text>
                <text x="52" y="164">link</text>
                <text x="180" y="196">Send</text>
                <text x="220" y="196">join</text>
                <text x="180" y="212">link</text>
                <text x="216" y="212">OOB</text>
                <text x="88" y="260">...</text>
                <text x="180" y="260">time</text>
                <text x="228" y="260">passes</text>
                <text x="344" y="260">...</text>
              </g>
            </svg><a href="#section-3.2-3.1" class="pilcrow">¶</a>
</div>
</div>
<p id="section-3.2-4">Once Bob receives the join link, he fetches the GroupInfo for the room
and validates it, then joins the room.<a href="#section-3.2-4" class="pilcrow">¶</a></p>
<p id="section-3.2-5">As in the previous flow, Bob needs to collect KeyPackages from his other
clients and add them to the room (not shown).<a href="#section-3.2-5" class="pilcrow">¶</a></p>
<p id="section-3.2-6">Bob can also then reveal his actual identity to the other participants of
the room in an application message.<a href="#section-3.2-6" class="pilcrow">¶</a></p>
<div id="section-3.2-7">
          <div class="alignLeft art-svg artwork" id="section-3.2-7.1">
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="352" width="496" viewBox="0 0 496 352" class="diagram" text-anchor="middle" font-family="monospace" font-size="13px" stroke-linecap="round">
              <path d="M 24,48 L 24,336" fill="none" stroke="black"></path>
              <path d="M 152,48 L 152,336" fill="none" stroke="black"></path>
              <path d="M 280,48 L 280,336" fill="none" stroke="black"></path>
              <path d="M 408,48 L 408,336" fill="none" stroke="black"></path>
              <path d="M 288,96 Q 290,92.8 292,96 Q 294,99.2 296,96 Q 298,92.8 300,96 Q 302,99.2 304,96 Q 306,92.8 308,96 Q 310,99.2 312,96 Q 314,92.8 316,96 Q 318,99.2 320,96 Q 322,92.8 324,96 Q 326,99.2 328,96 Q 330,92.8 332,96 Q 334,99.2 336,96 Q 338,92.8 340,96 Q 342,99.2 344,96 Q 346,92.8 348,96 Q 350,99.2 352,96 Q 354,92.8 356,96 Q 358,99.2 360,96 Q 362,92.8 364,96 Q 366,99.2 368,96 Q 370,92.8 372,96 Q 374,99.2 376,96 Q 378,92.8 380,96 Q 382,99.2 384,96 Q 386,92.8 388,96 Q 390,99.2 392,96 Q 394,92.8 396,96 Q 398,99.2 400,96 Q 402,92.8 404,96 Q 406,99.2 408,96" fill="none" stroke="black"></path>
              <path d="M 160,128 L 280,128" fill="none" stroke="black"></path>
              <path d="M 160,160 L 272,160" fill="none" stroke="black"></path>
              <path d="M 280,176 Q 282,172.8 284,176 Q 286,179.2 288,176 Q 290,172.8 292,176 Q 294,179.2 296,176 Q 298,172.8 300,176 Q 302,179.2 304,176 Q 306,172.8 308,176 Q 310,179.2 312,176 Q 314,172.8 316,176 Q 318,179.2 320,176 Q 322,172.8 324,176 Q 326,179.2 328,176 Q 330,172.8 332,176 Q 334,179.2 336,176 Q 338,172.8 340,176 Q 342,179.2 344,176 Q 346,172.8 348,176 Q 350,179.2 352,176 Q 354,172.8 356,176 Q 358,179.2 360,176 Q 362,172.8 364,176 Q 366,179.2 368,176 Q 370,172.8 372,176 Q 374,179.2 376,176 Q 378,172.8 380,176 Q 382,179.2 384,176 Q 386,172.8 388,176 Q 390,179.2 392,176 Q 394,172.8 396,176 Q 398,179.2 400,176" fill="none" stroke="black"></path>
              <path d="M 288,208 Q 290,204.8 292,208 Q 294,211.2 296,208 Q 298,204.8 300,208 Q 302,211.2 304,208 Q 306,204.8 308,208 Q 310,211.2 312,208 Q 314,204.8 316,208 Q 318,211.2 320,208 Q 322,204.8 324,208 Q 326,211.2 328,208 Q 330,204.8 332,208 Q 334,211.2 336,208 Q 338,204.8 340,208 Q 342,211.2 344,208 Q 346,204.8 348,208 Q 350,211.2 352,208 Q 354,204.8 356,208 Q 358,211.2 360,208 Q 362,204.8 364,208 Q 366,211.2 368,208 Q 370,204.8 372,208 Q 374,211.2 376,208 Q 378,204.8 380,208 Q 382,211.2 384,208 Q 386,204.8 388,208 Q 390,211.2 392,208 Q 394,204.8 396,208 Q 398,211.2 400,208 Q 402,204.8 404,208 Q 406,211.2 408,208" fill="none" stroke="black"></path>
              <path d="M 160,240 L 280,240" fill="none" stroke="black"></path>
              <path d="M 32,256 Q 34,252.8 36,256 Q 38,259.2 40,256 Q 42,252.8 44,256 Q 46,259.2 48,256 Q 50,252.8 52,256 Q 54,259.2 56,256 Q 58,252.8 60,256 Q 62,259.2 64,256 Q 66,252.8 68,256 Q 70,259.2 72,256 Q 74,252.8 76,256 Q 78,259.2 80,256 Q 82,252.8 84,256 Q 86,259.2 88,256 Q 90,252.8 92,256 Q 94,259.2 96,256 Q 98,252.8 100,256 Q 102,259.2 104,256 Q 106,252.8 108,256 Q 110,259.2 112,256 Q 114,252.8 116,256 Q 118,259.2 120,256 Q 122,252.8 124,256 Q 126,259.2 128,256 Q 130,252.8 132,256 Q 134,259.2 136,256 Q 138,252.8 140,256 Q 142,259.2 144,256 Q 146,252.8 148,256 Q 150,259.2 152,256" fill="none" stroke="black"></path>
              <path d="M 288,288 Q 290,284.8 292,288 Q 294,291.2 296,288 Q 298,284.8 300,288 Q 302,291.2 304,288 Q 306,284.8 308,288 Q 310,291.2 312,288 Q 314,284.8 316,288 Q 318,291.2 320,288 Q 322,284.8 324,288 Q 326,291.2 328,288 Q 330,284.8 332,288 Q 334,291.2 336,288 Q 338,284.8 340,288 Q 342,291.2 344,288 Q 346,284.8 348,288 Q 350,291.2 352,288 Q 354,284.8 356,288 Q 358,291.2 360,288 Q 362,284.8 364,288 Q 366,291.2 368,288 Q 370,284.8 372,288 Q 374,291.2 376,288 Q 378,284.8 380,288 Q 382,291.2 384,288 Q 386,284.8 388,288 Q 390,291.2 392,288 Q 394,284.8 396,288 Q 398,291.2 400,288 Q 402,284.8 404,288 Q 406,291.2 408,288" fill="none" stroke="black"></path>
              <path d="M 160,304 L 280,304" fill="none" stroke="black"></path>
              <path d="M 32,320 Q 34,316.8 36,320 Q 38,323.2 40,320 Q 42,316.8 44,320 Q 46,323.2 48,320 Q 50,316.8 52,320 Q 54,323.2 56,320 Q 58,316.8 60,320 Q 62,323.2 64,320 Q 66,316.8 68,320 Q 70,323.2 72,320 Q 74,316.8 76,320 Q 78,323.2 80,320 Q 82,316.8 84,320 Q 86,323.2 88,320 Q 90,316.8 92,320 Q 94,323.2 96,320 Q 98,316.8 100,320 Q 102,323.2 104,320 Q 106,316.8 108,320 Q 110,323.2 112,320 Q 114,316.8 116,320 Q 118,323.2 120,320 Q 122,316.8 124,320 Q 126,323.2 128,320 Q 130,316.8 132,320 Q 134,323.2 136,320 Q 138,316.8 140,320 Q 142,323.2 144,320 Q 146,316.8 148,320 Q 150,323.2 152,320" fill="none" stroke="black"></path>
              <polygon class="arrowhead" points="408,176 396,170.4 396,181.6" fill="black" transform="rotate(0,400,176)"></polygon>
              <polygon class="arrowhead" points="296,288 284,282.4 284,293.6" fill="black" transform="rotate(180,288,288)"></polygon>
              <polygon class="arrowhead" points="296,208 284,202.4 284,213.6" fill="black" transform="rotate(180,288,208)"></polygon>
              <polygon class="arrowhead" points="296,96 284,90.4 284,101.6" fill="black" transform="rotate(180,288,96)"></polygon>
              <polygon class="arrowhead" points="280,160 268,154.4 268,165.6" fill="black" transform="rotate(0,272,160)"></polygon>
              <polygon class="arrowhead" points="168,304 156,298.4 156,309.6" fill="black" transform="rotate(180,160,304)"></polygon>
              <polygon class="arrowhead" points="168,240 156,234.4 156,245.6" fill="black" transform="rotate(180,160,240)"></polygon>
              <polygon class="arrowhead" points="168,128 156,122.4 156,133.6" fill="black" transform="rotate(180,160,128)"></polygon>
              <polygon class="arrowhead" points="40,320 28,314.4 28,325.6" fill="black" transform="rotate(180,32,320)"></polygon>
              <polygon class="arrowhead" points="40,256 28,250.4 28,261.6" fill="black" transform="rotate(180,32,256)"></polygon>
              <g class="text">
                <text x="36" y="36">ClientA1</text>
                <text x="152" y="36">ServerA</text>
                <text x="280" y="36">ServerB</text>
                <text x="412" y="36">ClientB*</text>
                <text x="432" y="68">Bob</text>
                <text x="468" y="68">uses</text>
                <text x="304" y="84">Use</text>
                <text x="340" y="84">join</text>
                <text x="380" y="84">link</text>
                <text x="436" y="84">join</text>
                <text x="476" y="84">link</text>
                <text x="228" y="116">/groupInfo</text>
                <text x="172" y="148">OK</text>
                <text x="232" y="148">GroupInfo</text>
                <text x="328" y="164">GroupInfo</text>
                <text x="320" y="196">Commit,</text>
                <text x="372" y="196">etc.</text>
                <text x="240" y="228">/notify</text>
                <text x="60" y="244">Commit</text>
                <text x="328" y="260">Message</text>
                <text x="312" y="276">Bob</text>
                <text x="348" y="276">real</text>
                <text x="380" y="276">ID</text>
                <text x="64" y="292">Message</text>
                <text x="240" y="292">/notify</text>
                <text x="48" y="308">Bob</text>
                <text x="84" y="308">real</text>
                <text x="116" y="308">ID</text>
              </g>
            </svg><a href="#section-3.2-7.1" class="pilcrow">¶</a>
</div>
</div>
<p id="section-3.2-8">This powerful flow is only possibly when Alice and Bob have an out-of-band
channel, and when Alice has permissions to create a join link in the target
room. Note that if a malicious third-party is used, the parties can still authenticate each other if they disclose their actual identities inside the
target room, but they would lose any metadata privacy properties they had.<a href="#section-3.2-8" class="pilcrow">¶</a></p>
</section>
</div>
<div id="knock-flow">
<section id="section-3.3">
        <h3 id="name-knock-flow">
<a href="#section-3.3" class="section-number selfRef">3.3. </a><a href="#name-knock-flow" class="section-name selfRef">Knock flow</a>
        </h3>
<p id="section-3.3-1">A new user Cathy is aware of a room that she wants to join. Likely there is
web page for the room with instructions for joining. The page includes a
related "knock room" which contains the moderators or administrators of the
target room. The "knock room" can be joined by anyone, but by default each
joiner can send one message to the admins while regular users never receive application messages sent to the group (although the client has the keying material needed to decrypt the ciphertext if they receive it.)<a href="#section-3.3-1" class="pilcrow">¶</a></p>
<p id="section-3.3-2">Cathy sends a message with her KeyPackages for one of her pseudonyms. She
then leaves the "knock room".<a href="#section-3.3-2" class="pilcrow">¶</a></p>
<div id="section-3.3-3">
          <div class="alignLeft art-svg artwork" id="section-3.3-3.1">
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="480" width="528" viewBox="0 0 528 480" class="diagram" text-anchor="middle" font-family="monospace" font-size="13px" stroke-linecap="round">
              <path d="M 24,48 L 24,464" fill="none" stroke="black"></path>
              <path d="M 152,48 L 152,464" fill="none" stroke="black"></path>
              <path d="M 280,48 L 280,464" fill="none" stroke="black"></path>
              <path d="M 408,48 L 408,464" fill="none" stroke="black"></path>
              <path d="M 288,112 Q 290,108.8 292,112 Q 294,115.2 296,112 Q 298,108.8 300,112 Q 302,115.2 304,112 Q 306,108.8 308,112 Q 310,115.2 312,112 Q 314,108.8 316,112 Q 318,115.2 320,112 Q 322,108.8 324,112 Q 326,115.2 328,112 Q 330,108.8 332,112 Q 334,115.2 336,112 Q 338,108.8 340,112 Q 342,115.2 344,112 Q 346,108.8 348,112 Q 350,115.2 352,112 Q 354,108.8 356,112 Q 358,115.2 360,112 Q 362,108.8 364,112 Q 366,115.2 368,112 Q 370,108.8 372,112 Q 374,115.2 376,112 Q 378,108.8 380,112 Q 382,115.2 384,112 Q 386,108.8 388,112 Q 390,115.2 392,112 Q 394,108.8 396,112 Q 398,115.2 400,112 Q 402,108.8 404,112 Q 406,115.2 408,112" fill="none" stroke="black"></path>
              <path d="M 160,144 L 280,144" fill="none" stroke="black"></path>
              <path d="M 160,176 L 272,176" fill="none" stroke="black"></path>
              <path d="M 280,192 Q 282,188.8 284,192 Q 286,195.2 288,192 Q 290,188.8 292,192 Q 294,195.2 296,192 Q 298,188.8 300,192 Q 302,195.2 304,192 Q 306,188.8 308,192 Q 310,195.2 312,192 Q 314,188.8 316,192 Q 318,195.2 320,192 Q 322,188.8 324,192 Q 326,195.2 328,192 Q 330,188.8 332,192 Q 334,195.2 336,192 Q 338,188.8 340,192 Q 342,195.2 344,192 Q 346,188.8 348,192 Q 350,195.2 352,192 Q 354,188.8 356,192 Q 358,195.2 360,192 Q 362,188.8 364,192 Q 366,195.2 368,192 Q 370,188.8 372,192 Q 374,195.2 376,192 Q 378,188.8 380,192 Q 382,195.2 384,192 Q 386,188.8 388,192 Q 390,195.2 392,192 Q 394,188.8 396,192 Q 398,195.2 400,192" fill="none" stroke="black"></path>
              <path d="M 288,224 Q 290,220.8 292,224 Q 294,227.2 296,224 Q 298,220.8 300,224 Q 302,227.2 304,224 Q 306,220.8 308,224 Q 310,227.2 312,224 Q 314,220.8 316,224 Q 318,227.2 320,224 Q 322,220.8 324,224 Q 326,227.2 328,224 Q 330,220.8 332,224 Q 334,227.2 336,224 Q 338,220.8 340,224 Q 342,227.2 344,224 Q 346,220.8 348,224 Q 350,227.2 352,224 Q 354,220.8 356,224 Q 358,227.2 360,224 Q 362,220.8 364,224 Q 366,227.2 368,224 Q 370,220.8 372,224 Q 374,227.2 376,224 Q 378,220.8 380,224 Q 382,227.2 384,224 Q 386,220.8 388,224 Q 390,227.2 392,224 Q 394,220.8 396,224 Q 398,227.2 400,224 Q 402,220.8 404,224 Q 406,227.2 408,224" fill="none" stroke="black"></path>
              <path d="M 160,256 L 280,256" fill="none" stroke="black"></path>
              <path d="M 32,272 Q 34,268.8 36,272 Q 38,275.2 40,272 Q 42,268.8 44,272 Q 46,275.2 48,272 Q 50,268.8 52,272 Q 54,275.2 56,272 Q 58,268.8 60,272 Q 62,275.2 64,272 Q 66,268.8 68,272 Q 70,275.2 72,272 Q 74,268.8 76,272 Q 78,275.2 80,272 Q 82,268.8 84,272 Q 86,275.2 88,272 Q 90,268.8 92,272 Q 94,275.2 96,272 Q 98,268.8 100,272 Q 102,275.2 104,272 Q 106,268.8 108,272 Q 110,275.2 112,272 Q 114,268.8 116,272 Q 118,275.2 120,272 Q 122,268.8 124,272 Q 126,275.2 128,272 Q 130,268.8 132,272 Q 134,275.2 136,272 Q 138,268.8 140,272 Q 142,275.2 144,272 Q 146,268.8 148,272 Q 150,275.2 152,272" fill="none" stroke="black"></path>
              <path d="M 288,320 Q 290,316.8 292,320 Q 294,323.2 296,320 Q 298,316.8 300,320 Q 302,323.2 304,320 Q 306,316.8 308,320 Q 310,323.2 312,320 Q 314,316.8 316,320 Q 318,323.2 320,320 Q 322,316.8 324,320 Q 326,323.2 328,320 Q 330,316.8 332,320 Q 334,323.2 336,320 Q 338,316.8 340,320 Q 342,323.2 344,320 Q 346,316.8 348,320 Q 350,323.2 352,320 Q 354,316.8 356,320 Q 358,323.2 360,320 Q 362,316.8 364,320 Q 366,323.2 368,320 Q 370,316.8 372,320 Q 374,323.2 376,320 Q 378,316.8 380,320 Q 382,323.2 384,320 Q 386,316.8 388,320 Q 390,323.2 392,320 Q 394,316.8 396,320 Q 398,323.2 400,320 Q 402,316.8 404,320 Q 406,323.2 408,320" fill="none" stroke="black"></path>
              <path d="M 160,336 L 280,336" fill="none" stroke="black"></path>
              <path d="M 32,352 Q 34,348.8 36,352 Q 38,355.2 40,352 Q 42,348.8 44,352 Q 46,355.2 48,352 Q 50,348.8 52,352 Q 54,355.2 56,352 Q 58,348.8 60,352 Q 62,355.2 64,352 Q 66,348.8 68,352 Q 70,355.2 72,352 Q 74,348.8 76,352 Q 78,355.2 80,352 Q 82,348.8 84,352 Q 86,355.2 88,352 Q 90,348.8 92,352 Q 94,355.2 96,352 Q 98,348.8 100,352 Q 102,355.2 104,352 Q 106,348.8 108,352 Q 110,355.2 112,352 Q 114,348.8 116,352 Q 118,355.2 120,352 Q 122,348.8 124,352 Q 126,355.2 128,352 Q 130,348.8 132,352 Q 134,355.2 136,352 Q 138,348.8 140,352 Q 142,355.2 144,352 Q 146,348.8 148,352 Q 150,355.2 152,352" fill="none" stroke="black"></path>
              <path d="M 288,384 Q 290,380.8 292,384 Q 294,387.2 296,384 Q 298,380.8 300,384 Q 302,387.2 304,384 Q 306,380.8 308,384 Q 310,387.2 312,384 Q 314,380.8 316,384 Q 318,387.2 320,384 Q 322,380.8 324,384 Q 326,387.2 328,384 Q 330,380.8 332,384 Q 334,387.2 336,384 Q 338,380.8 340,384 Q 342,387.2 344,384 Q 346,380.8 348,384 Q 350,387.2 352,384 Q 354,380.8 356,384 Q 358,387.2 360,384 Q 362,380.8 364,384 Q 366,387.2 368,384 Q 370,380.8 372,384 Q 374,387.2 376,384 Q 378,380.8 380,384 Q 382,387.2 384,384 Q 386,380.8 388,384 Q 390,387.2 392,384 Q 394,380.8 396,384 Q 398,387.2 400,384 Q 402,380.8 404,384 Q 406,387.2 408,384" fill="none" stroke="black"></path>
              <path d="M 160,400 L 280,400" fill="none" stroke="black"></path>
              <path d="M 32,416 Q 34,412.8 36,416 Q 38,419.2 40,416 Q 42,412.8 44,416 Q 46,419.2 48,416 Q 50,412.8 52,416 Q 54,419.2 56,416 Q 58,412.8 60,416 Q 62,419.2 64,416 Q 66,412.8 68,416 Q 70,419.2 72,416 Q 74,412.8 76,416 Q 78,419.2 80,416 Q 82,412.8 84,416 Q 86,419.2 88,416 Q 90,412.8 92,416 Q 94,419.2 96,416 Q 98,412.8 100,416 Q 102,419.2 104,416 Q 106,412.8 108,416 Q 110,419.2 112,416 Q 114,412.8 116,416 Q 118,419.2 120,416 Q 122,412.8 124,416 Q 126,419.2 128,416 Q 130,412.8 132,416 Q 134,419.2 136,416 Q 138,412.8 140,416 Q 142,419.2 144,416 Q 146,412.8 148,416 Q 150,419.2 152,416" fill="none" stroke="black"></path>
              <polygon class="arrowhead" points="408,192 396,186.4 396,197.6" fill="black" transform="rotate(0,400,192)"></polygon>
              <polygon class="arrowhead" points="296,384 284,378.4 284,389.6" fill="black" transform="rotate(180,288,384)"></polygon>
              <polygon class="arrowhead" points="296,320 284,314.4 284,325.6" fill="black" transform="rotate(180,288,320)"></polygon>
              <polygon class="arrowhead" points="296,224 284,218.4 284,229.6" fill="black" transform="rotate(180,288,224)"></polygon>
              <polygon class="arrowhead" points="296,112 284,106.4 284,117.6" fill="black" transform="rotate(180,288,112)"></polygon>
              <polygon class="arrowhead" points="280,176 268,170.4 268,181.6" fill="black" transform="rotate(0,272,176)"></polygon>
              <polygon class="arrowhead" points="168,400 156,394.4 156,405.6" fill="black" transform="rotate(180,160,400)"></polygon>
              <polygon class="arrowhead" points="168,336 156,330.4 156,341.6" fill="black" transform="rotate(180,160,336)"></polygon>
              <polygon class="arrowhead" points="168,256 156,250.4 156,261.6" fill="black" transform="rotate(180,160,256)"></polygon>
              <polygon class="arrowhead" points="168,144 156,138.4 156,149.6" fill="black" transform="rotate(180,160,144)"></polygon>
              <polygon class="arrowhead" points="40,416 28,410.4 28,421.6" fill="black" transform="rotate(180,32,416)"></polygon>
              <polygon class="arrowhead" points="40,352 28,346.4 28,357.6" fill="black" transform="rotate(180,32,352)"></polygon>
              <polygon class="arrowhead" points="40,272 28,266.4 28,277.6" fill="black" transform="rotate(180,32,272)"></polygon>
              <g class="text">
                <text x="36" y="36">ClientA1</text>
                <text x="152" y="36">ServerA</text>
                <text x="280" y="36">ServerC</text>
                <text x="412" y="36">ClientC*</text>
                <text x="440" y="68">Cathy</text>
                <text x="488" y="68">finds</text>
                <text x="444" y="84">"knock</text>
                <text x="496" y="84">room"</text>
                <text x="304" y="100">get</text>
                <text x="360" y="100">GroupInfo</text>
                <text x="228" y="132">/groupInfo</text>
                <text x="172" y="164">OK</text>
                <text x="232" y="164">GroupInfo</text>
                <text x="328" y="180">GroupInfo</text>
                <text x="320" y="212">Commit,</text>
                <text x="372" y="212">etc.</text>
                <text x="240" y="244">/notify</text>
                <text x="60" y="260">Commit</text>
                <text x="304" y="276">App</text>
                <text x="356" y="276">Message:</text>
                <text x="320" y="292">"Knock"</text>
                <text x="48" y="308">App</text>
                <text x="100" y="308">Message:</text>
                <text x="308" y="308">Real</text>
                <text x="344" y="308">ID,</text>
                <text x="376" y="308">KPs</text>
                <text x="64" y="324">"Knock"</text>
                <text x="240" y="324">/notify</text>
                <text x="52" y="340">Real</text>
                <text x="88" y="340">ID,</text>
                <text x="120" y="340">KPs</text>
                <text x="316" y="356">Remove</text>
                <text x="328" y="372">Proposals</text>
                <text x="440" y="372">Cathy</text>
                <text x="496" y="372">removes</text>
                <text x="448" y="388">herself</text>
                <text x="60" y="404">Remove</text>
                <text x="88" y="452">...</text>
                <text x="180" y="452">time</text>
                <text x="228" y="452">passes</text>
                <text x="344" y="452">...</text>
              </g>
            </svg><a href="#section-3.3-3.1" class="pilcrow">¶</a>
</div>
</div>
<p id="section-3.3-4">An administrator of the target room decides to add Cathy using the
KeyPackages she provided in the (related) "knock room".<a href="#section-3.3-4" class="pilcrow">¶</a></p>
<div id="section-3.3-5">
          <div class="alignLeft art-svg artwork" id="section-3.3-5.1">
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="176" width="448" viewBox="0 0 448 176" class="diagram" text-anchor="middle" font-family="monospace" font-size="13px" stroke-linecap="round">
              <path d="M 24,48 L 24,160" fill="none" stroke="black"></path>
              <path d="M 152,48 L 152,160" fill="none" stroke="black"></path>
              <path d="M 280,48 L 280,160" fill="none" stroke="black"></path>
              <path d="M 408,48 L 408,160" fill="none" stroke="black"></path>
              <path d="M 24,80 Q 26,76.8 28,80 Q 30,83.2 32,80 Q 34,76.8 36,80 Q 38,83.2 40,80 Q 42,76.8 44,80 Q 46,83.2 48,80 Q 50,76.8 52,80 Q 54,83.2 56,80 Q 58,76.8 60,80 Q 62,83.2 64,80 Q 66,76.8 68,80 Q 70,83.2 72,80 Q 74,76.8 76,80 Q 78,83.2 80,80 Q 82,76.8 84,80 Q 86,83.2 88,80 Q 90,76.8 92,80 Q 94,83.2 96,80 Q 98,76.8 100,80 Q 102,83.2 104,80 Q 106,76.8 108,80 Q 110,83.2 112,80 Q 114,76.8 116,80 Q 118,83.2 120,80 Q 122,76.8 124,80 Q 126,83.2 128,80 Q 130,76.8 132,80 Q 134,83.2 136,80 Q 138,76.8 140,80 Q 142,83.2 144,80" fill="none" stroke="black"></path>
              <path d="M 32,112 Q 34,108.8 36,112 Q 38,115.2 40,112 Q 42,108.8 44,112 Q 46,115.2 48,112 Q 50,108.8 52,112 Q 54,115.2 56,112 Q 58,108.8 60,112 Q 62,115.2 64,112 Q 66,108.8 68,112 Q 70,115.2 72,112 Q 74,108.8 76,112 Q 78,115.2 80,112 Q 82,108.8 84,112 Q 86,115.2 88,112 Q 90,108.8 92,112 Q 94,115.2 96,112 Q 98,108.8 100,112 Q 102,115.2 104,112 Q 106,108.8 108,112 Q 110,115.2 112,112 Q 114,108.8 116,112 Q 118,115.2 120,112 Q 122,108.8 124,112 Q 126,115.2 128,112 Q 130,108.8 132,112 Q 134,115.2 136,112 Q 138,108.8 140,112 Q 142,115.2 144,112 Q 146,108.8 148,112 Q 150,115.2 152,112" fill="none" stroke="black"></path>
              <path d="M 152,112 L 272,112" fill="none" stroke="black"></path>
              <path d="M 160,144 L 280,144" fill="none" stroke="black"></path>
              <path d="M 280,144 Q 282,140.8 284,144 Q 286,147.2 288,144 Q 290,140.8 292,144 Q 294,147.2 296,144 Q 298,140.8 300,144 Q 302,147.2 304,144 Q 306,140.8 308,144 Q 310,147.2 312,144 Q 314,140.8 316,144 Q 318,147.2 320,144 Q 322,140.8 324,144 Q 326,147.2 328,144 Q 330,140.8 332,144 Q 334,147.2 336,144 Q 338,140.8 340,144 Q 342,147.2 344,144 Q 346,140.8 348,144 Q 350,147.2 352,144 Q 354,140.8 356,144 Q 358,147.2 360,144 Q 362,140.8 364,144 Q 366,147.2 368,144 Q 370,140.8 372,144 Q 374,147.2 376,144 Q 378,140.8 380,144 Q 382,147.2 384,144 Q 386,140.8 388,144 Q 390,147.2 392,144 Q 394,140.8 396,144 Q 398,147.2 400,144" fill="none" stroke="black"></path>
              <polygon class="arrowhead" points="408,144 396,138.4 396,149.6" fill="black" transform="rotate(0,400,144)"></polygon>
              <polygon class="arrowhead" points="280,112 268,106.4 268,117.6" fill="black" transform="rotate(0,272,112)"></polygon>
              <polygon class="arrowhead" points="168,144 156,138.4 156,149.6" fill="black" transform="rotate(180,160,144)"></polygon>
              <polygon class="arrowhead" points="152,80 140,74.4 140,85.6" fill="black" transform="rotate(0,144,80)"></polygon>
              <polygon class="arrowhead" points="40,112 28,106.4 28,117.6" fill="black" transform="rotate(180,32,112)"></polygon>
              <g class="text">
                <text x="36" y="36">ClientA1</text>
                <text x="152" y="36">ServerA</text>
                <text x="280" y="36">ServerC</text>
                <text x="412" y="36">ClientC*</text>
                <text x="64" y="68">Commit,</text>
                <text x="116" y="68">etc.</text>
                <text x="108" y="100">Accepted</text>
                <text x="192" y="100">/notify</text>
                <text x="232" y="132">200</text>
                <text x="260" y="132">OK</text>
                <text x="324" y="132">Welcome,</text>
                <text x="380" y="132">Tree</text>
              </g>
            </svg><a href="#section-3.3-5.1" class="pilcrow">¶</a>
</div>
</div>
<p id="section-3.3-6">This flow is ideal for joining an established affinity group. For example,
this method could be used by members of marginalized communities. The
perspective joiner needs to believe that the "knock room" contains only
moderators who will treat their join request in confidence and not "out"
them.<a href="#section-3.3-6" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="disclosing-additional-identity-properties-in-an-application-message">
<section id="section-4">
      <h2 id="name-disclosing-additional-ident">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-disclosing-additional-ident" class="section-name selfRef">Disclosing additional identity properties in an application message</a>
      </h2>
<p id="section-4-1">The concept of pseudonyms is of limited utility if the subject of the
pseudonym cannot disclose additional "real" identity properties as it
wishes. In the connection flow, Alice reveals her "real" identity only to
Bob; in the join link flow, Bob reveals aspects of his "real" identity to
the room; in the knock flow, Cathy reveals aspects of her "real" identity
to the moderators of her target room, and depending on the policy of the
target room she might reveal a different aspect of her identity inside the
target room.<a href="#section-4-1" class="pilcrow">¶</a></p>
<p id="section-4-2">The properties needed for safe and appropriate identity disclosure include:<a href="#section-4-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4-3.1">
          <p id="section-4-3.1.1">The disclosure <span class="bcp14">MUST</span> be consistent with the room policy, which may require
disclosure of some elements, allow some elements to be optionally disclosed,
and may even forbid disclosure of other elements. For example, a sexually
explicit room might require participants to disclose that they are at least a certain age, and forbid the disclosure of postal addresses and family names.<a href="#section-4-3.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-4-3.2">
          <p id="section-4-3.2.1">The issuer / authority <span class="bcp14">MUST</span> be known to every participant of the room and
trusted for the purpose of making identity assertions for the domain(s) of
the provider of the subject user.<a href="#section-4-3.2.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-4-3.3">
          <p id="section-4-3.3.1">The signature key of the subject client in its MLS LeafNode <span class="bcp14">MUST</span> be the
same as the public key in the identity assertion.<a href="#section-4-3.3.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-4-3.4">
          <p id="section-4-3.4.1">Whatever identity construction is used <span class="bcp14">MUST</span> be valid according the rules for that construction.<a href="#section-4-3.4.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-4-3.5">
          <p id="section-4-3.5.1">The presentation of the identity assertion <span class="bcp14">MUST</span> bind the presentation to
possession of the identity's private key (key binding).<a href="#section-4-3.5.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-4-3.6">
          <p id="section-4-3.6.1">The key binding <span class="bcp14">SHOULD</span> be scoped to a narrow and relevant audience (for
example the target room), and include other mechanisms to prevent replay/
copy and paste attacks.<a href="#section-4-3.6.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<p id="section-4-4">This document assumes that these disclosures happen to participants of a
room inside an application message, directly using an appropriate media type
(not necessarily inside a MIMI content message).  The next three subsections
describe three such mechanisms.<a href="#section-4-4" class="pilcrow">¶</a></p>
<div id="generic-mls-credential">
<section id="section-4.1">
        <h3 id="name-generic-mls-credential">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-generic-mls-credential" class="section-name selfRef">Generic MLS Credential</a>
        </h3>
<p id="section-4.1-1">MIMI describes its use with the MLS protocol <span>[<a href="#RFC9420" class="cite xref">RFC9420</a>]</span>.
If a new media type <code>application/mls-credential</code> was defined, clients could
send the MLS Credential struct (possibly with the credential name as a media type parameter.) The MLS struct is reproduced here:<a href="#section-4.1-1" class="pilcrow">¶</a></p>
<div class="lang-tls sourcecode" id="section-4.1-2">
<pre>
struct {
    CredentialType credential_type;
    select (Credential.credential_type) {
        case basic:
            opaque identity&lt;V&gt;;

        case x509:
            Certificate certificates&lt;V&gt;;
    };
} Credential;
</pre><a href="#section-4.1-2" class="pilcrow">¶</a>
</div>
<p id="section-4.1-3">For example, the client's MLS LeafNode could contain an MLS Credential with
an X.509 certificate with a <code>subjectAltName</code> URI that corresponds to the
pseudonym address of the client. The client could then disclose to the room
a different X.509 certificate with the same issuer and public key which also
reveals the "real" display name, and email address of the user.<a href="#section-4.1-3" class="pilcrow">¶</a></p>
<p id="section-4.1-4">OpenID Connect UserInfo Verifiable Credentials (VCs) are another proposed
MLS Credential type <span>[<a href="#I-D.barnes-mls-addl-creds" class="cite xref">I-D.barnes-mls-addl-creds</a>]</span> with more natural claims
semantics.<a href="#section-4.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="selective-disclosure-json-web-tokens">
<section id="section-4.2">
        <h3 id="name-selective-disclosure-json-w">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-selective-disclosure-json-w" class="section-name selfRef">Selective Disclosure JSON Web Tokens</a>
        </h3>
<p id="section-4.2-1">While the use of JSON Web Tokens (JWT) <span>[<a href="#RFC7519" class="cite xref">RFC7519</a>]</span> is widespread, most
uses do not require the holder/presenter to prove possession of a private
key as in <span>[<a href="#RFC9449" class="cite xref">RFC9449</a>]</span>. Selective disclosure JWT (SD-JWT)
<span>[<a href="#I-D.ietf-oauth-selective-disclosure-jwt" class="cite xref">I-D.ietf-oauth-selective-disclosure-jwt</a>]</span> describes both a way to
selectively disclose claims, it also include an optional presenter key
binding mechanism. The format uses the media type <code>application/sd+jwt</code>.<a href="#section-4.2-1" class="pilcrow">¶</a></p>
<p id="section-4.2-2">This format could be used directly in MIMI with an appropriate profile.<a href="#section-4.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="selective-disclosure-cbor-web-tokens">
<section id="section-4.3">
        <h3 id="name-selective-disclosure-cbor-w">
<a href="#section-4.3" class="section-number selfRef">4.3. </a><a href="#name-selective-disclosure-cbor-w" class="section-name selfRef">Selective Disclosure CBOR Web Tokens</a>
        </h3>
<p id="section-4.3-1">Likewise, there are Selective Disclosure CBOR Web Tokens (SD-CWT)
<span>[<a href="#I-D.prorock-spice-cose-sd-cwt" class="cite xref">I-D.prorock-spice-cose-sd-cwt</a>]</span>. SD-CWT uses the media type
<code>application/sd+cwt</code>, and requires the use of its key binding
mechanism in presentations.<a href="#section-4.3-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="spam-and-abuse-prevention">
<section id="section-5">
      <h2 id="name-spam-and-abuse-prevention">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-spam-and-abuse-prevention" class="section-name selfRef">Spam and Abuse prevention</a>
      </h2>
<p id="section-5-1">MIMI has a requirement to be able to prevent spam and other forms of abuse.
When using pseudonymous identities, there is naturally concern that an
account with many pseudonyms could be used to violate room policy in the
same room repeatedly or in multiple rooms with impunity. This section
explores some implementation options to prevent this.<a href="#section-5-1" class="pilcrow">¶</a></p>
<p id="section-5-2">In a multi-provider messaging system, the hub provider is the only provider that knows the room policy and therefore the only provider that can decide if the policy is being violated. The local provider will need to eventually cooperate with the hub provider in order to prevent the same bad actor from
violating policy repeatedly with different pseudonyms.<a href="#section-5-2" class="pilcrow">¶</a></p>
<div id="detection-signals">
<section id="section-5.1">
        <h3 id="name-detection-signals">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-detection-signals" class="section-name selfRef">Detection signals</a>
        </h3>
<p id="section-5.1-1">There are several signals used for detection of spam or abuse.
In theory, an explicit abuse report should be a very strong signal of abuse.
However, an abuse report could be sent accidentally; it could be the result
of a misunderstanding about the policy in a room; or it could have been sent
maliciously. A report might be incorrectly processed by an algorithm, or it
might need to wait for a human moderator to process it.<a href="#section-5.1-1" class="pilcrow">¶</a></p>
<p id="section-5.1-2">A ban or kick by a moderator or administrator of a group could also be a strong signal, but an administrator might maliciously act against someone
they disagree with rather than someone who actually violated policy. Since
the motivation for the ban or kick is not shared with the hub, the claim is
also impossible to validate.<a href="#section-5.1-2" class="pilcrow">¶</a></p>
<p id="section-5.1-3">The hub may also use the rate or pattern of joining groups or sending
messages for one of its own users as an indicator of how spammy that user
is, but for users based on other providers it has no way to correlate that
information across pseudonyms.<a href="#section-5.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="remedies">
<section id="section-5.2">
        <h3 id="name-remedies">
<a href="#section-5.2" class="section-number selfRef">5.2. </a><a href="#name-remedies" class="section-name selfRef">Remedies</a>
        </h3>
<p id="section-5.2-1">Once the hub suspects that a user has violated its policies, it has a number
of possible remedies. Some of these remedies require cooperation with the
local provider of that user.<a href="#section-5.2-1" class="pilcrow">¶</a></p>
<p id="section-5.2-2">Actions the hub can take independently:<a href="#section-5.2-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.2-3.1">
            <p id="section-5.2-3.1.1">prevent the user from sending messages in a room<a href="#section-5.2-3.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-5.2-3.2">
            <p id="section-5.2-3.2.1">remove the user from a room (kick)<a href="#section-5.2-3.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-5.2-3.3">
            <p id="section-5.2-3.3.1">ban the user from a room (temporarily)<a href="#section-5.2-3.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-5.2-3.4">
            <p id="section-5.2-3.4.1">ban the user from a room (permanently)<a href="#section-5.2-3.4.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="section-5.2-4">Actions requiring cooperation of the user's local provider<a href="#section-5.2-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.2-5.1">
            <p id="section-5.2-5.1.1">suspend the account of the user<a href="#section-5.2-5.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-5.2-5.2">
            <p id="section-5.2-5.2.1">suspend the account of the user and remove the user (including all pseudonyms) from all rooms<a href="#section-5.2-5.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-5.2-5.3">
            <p id="section-5.2-5.3.1">completely delete the account of the user<a href="#section-5.2-5.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-5.2-5.4">
            <p id="section-5.2-5.4.1">suspend the account and any accounts deemed "related" (ex: used the same email address or phone number)<a href="#section-5.2-5.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-5.2-5.5">
            <p id="section-5.2-5.5.1">delete the account and any "related" accounts<a href="#section-5.2-5.5.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="section-5.2-6">Specifying an interface for reporting suspected abusive identities from
one provider to another is currently out-of-scope of the MIMI charter and
likely to be defined between providers or by a more focussed standards
developing organization, such as the Messaging Anti-Abuse Working Group
(M3AAWG).<a href="#section-5.2-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="correlating-anti-abuse-actions-across-multiple-pseudonyms">
<section id="section-5.3">
        <h3 id="name-correlating-anti-abuse-acti">
<a href="#section-5.3" class="section-number selfRef">5.3. </a><a href="#name-correlating-anti-abuse-acti" class="section-name selfRef">Correlating anti-abuse actions across multiple pseudonyms</a>
        </h3>
<p id="section-5.3-1">It is possible that the local provider for a user can lookup the
account associated with a specific user identity. This may be
straightforward, or the provider might implement a scheme where this lookup
is possible but requires extra technical or operational steps and leaves
evidence of the inquiry. This would be the moral equivalent of breaking the
pane of glass in some manual fire alarms.<a href="#section-5.3-1" class="pilcrow">¶</a></p>
<p id="section-5.3-2">In other implementations, perhaps no direct lookup is possible during normal
operation of the system, but an API could suspend of delete the account
associated with a particular pseudonym.<a href="#section-5.3-2" class="pilcrow">¶</a></p>
<p id="section-5.3-3">For some providers it may be operationally acceptable that only a small
number of pseudonyms can be created for a particular account.<a href="#section-5.3-3" class="pilcrow">¶</a></p>
<p id="section-5.3-4">There are also mechanisms such as searchable encryption and homomorphic
encryption, which allow searching for all the pseudonyms with the same
account id with a combined spam factor over a certain threshold.
Alternatively, a provider may use similar encryption mechanisms but require
a positive reputation threshold in order to allow new pseudonyms to be
created.<a href="#section-5.3-4" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="implications-with-explicit-consent-mechanism">
<section id="section-6">
      <h2 id="name-implications-with-explicit-">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-implications-with-explicit-" class="section-name selfRef">Implications with explicit consent mechanism</a>
      </h2>
<p id="section-6-1">In many of the flows in this document, one user provides another with a
KeyPackage. In many cases the KeyPackages will be valid for several weeks or
months and most new rendezvous will be realized during that time. However if
a KeyPackage expires, the other party may need explicit consent to fetch a
new KeyPackage to replace the expired one.<a href="#section-6-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="other-mechanism-needed">
<section id="section-7">
      <h2 id="name-other-mechanism-needed">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-other-mechanism-needed" class="section-name selfRef">Other mechanism needed</a>
      </h2>
<p id="section-7-1">This document describes some flows for effective, selectively
pseudonymous privacy. Use in a MIMI system requires a small amount
of additional specification and implementation. The author has attempted to
list this items according to whether they are in-scope according to the MIMI
charter.<a href="#section-7-1" class="pilcrow">¶</a></p>
<p id="section-7-2">Out of scope:<a href="#section-7-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-7-3.1">
          <p id="section-7-3.1.1">A way for clients to obtain pseudonyms from their own providers<a href="#section-7-3.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-7-3.2">
          <p id="section-7-3.2.1">Rate limiting pseudonym creation on a local provider<a href="#section-7-3.2.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-7-3.3">
          <p id="section-7-3.3.1">Correlating pseudonyms with an account on a local provider (may or may not be possible or necessary)<a href="#section-7-3.3.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-7-3.4">
          <p id="section-7-3.4.1">A way for a client to obtain a join link from its provider<a href="#section-7-3.4.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<p id="section-7-4">Assumed in scope:<a href="#section-7-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-7-5.1">
          <p id="section-7-5.1.1">A way to indicate a KeyPackage is only valid for initial connections<a href="#section-7-5.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-7-5.2">
          <p id="section-7-5.2.1">A way for MIMI entities to recognize pseudonyms<a href="#section-7-5.2.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-7-5.3">
          <p id="section-7-5.3.1">A way to examine the room policy about pseudonyms (required, optional,
forbidden), and if certain claims/elements are required, optional, or
forbidden.<a href="#section-7-5.3.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-7-5.4">
          <p id="section-7-5.4.1">A format or convention to wrap additional credentials, or disclosures of
selective disclosure credentials inside a room, along with KeyPackages, etc.<a href="#section-7-5.4.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-7-5.5">
          <p id="section-7-5.5.1">Conventions for use of existing authorization and consent primitives<a href="#section-7-5.5.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-7-5.6">
          <p id="section-7-5.6.1">Conventions to make KeyPackages available appropriately<a href="#section-7-5.6.1" class="pilcrow">¶</a></p>
</li>
      </ul>
</section>
</div>
<div id="security-considerations">
<section id="section-8">
      <h2 id="name-security-considerations">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-8-1">TODO Security<a href="#section-8-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="iana-considerations">
<section id="section-9">
      <h2 id="name-iana-considerations">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-9-1">This document has no IANA actions.<a href="#section-9-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sec-combined-references">
<section id="section-10">
      <h2 id="name-references">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<div id="sec-normative-references">
<section id="section-10.1">
        <h3 id="name-normative-references">
<a href="#section-10.1" class="section-number selfRef">10.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="I-D.ietf-mimi-protocol">[I-D.ietf-mimi-protocol]</dt>
        <dd>
<span class="refAuthor">Barnes, R.</span>, <span class="refAuthor">Hodgson, M.</span>, <span class="refAuthor">Kohbrok, K.</span>, <span class="refAuthor">Mahy, R.</span>, <span class="refAuthor">Ralston, T.</span>, and <span class="refAuthor">R. Robert</span>, <span class="refTitle">"More Instant Messaging Interoperability (MIMI) using HTTPS and MLS"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-mimi-protocol-01</span>, <time datetime="2024-07-08" class="refDate">8 July 2024</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-mimi-protocol-01">https://datatracker.ietf.org/doc/html/draft-ietf-mimi-protocol-01</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-oauth-selective-disclosure-jwt">[I-D.ietf-oauth-selective-disclosure-jwt]</dt>
        <dd>
<span class="refAuthor">Fett, D.</span>, <span class="refAuthor">Yasuda, K.</span>, and <span class="refAuthor">B. Campbell</span>, <span class="refTitle">"Selective Disclosure for JWTs (SD-JWT)"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-oauth-selective-disclosure-jwt-10</span>, <time datetime="2024-07-08" class="refDate">8 July 2024</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-oauth-selective-disclosure-jwt-10">https://datatracker.ietf.org/doc/html/draft-ietf-oauth-selective-disclosure-jwt-10</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.prorock-spice-cose-sd-cwt">[I-D.prorock-spice-cose-sd-cwt]</dt>
        <dd>
<span class="refAuthor">Prorock, M.</span>, <span class="refAuthor">Steele, O.</span>, and <span class="refAuthor">H. Birkholz</span>, <span class="refTitle">"Selective Disclosure CWTs (SD-CWT)"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-prorock-spice-cose-sd-cwt-01</span>, <time datetime="2024-06-17" class="refDate">17 June 2024</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-prorock-spice-cose-sd-cwt-01">https://datatracker.ietf.org/doc/html/draft-prorock-spice-cose-sd-cwt-01</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9420">[RFC9420]</dt>
      <dd>
<span class="refAuthor">Barnes, R.</span>, <span class="refAuthor">Beurdouche, B.</span>, <span class="refAuthor">Robert, R.</span>, <span class="refAuthor">Millican, J.</span>, <span class="refAuthor">Omara, E.</span>, and <span class="refAuthor">K. Cohn-Gordon</span>, <span class="refTitle">"The Messaging Layer Security (MLS) Protocol"</span>, <span class="seriesInfo">RFC 9420</span>, <span class="seriesInfo">DOI 10.17487/RFC9420</span>, <time datetime="2023-07" class="refDate">July 2023</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9420">https://www.rfc-editor.org/rfc/rfc9420</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</div>
<div id="sec-informative-references">
<section id="section-10.2">
        <h3 id="name-informative-references">
<a href="#section-10.2" class="section-number selfRef">10.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="I-D.barnes-mls-addl-creds">[I-D.barnes-mls-addl-creds]</dt>
        <dd>
<span class="refAuthor">Barnes, R.</span> and <span class="refAuthor">S. Nandakumar</span>, <span class="refTitle">"Additional MLS Credentials"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-barnes-mls-addl-creds-01</span>, <time datetime="2024-03-04" class="refDate">4 March 2024</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-barnes-mls-addl-creds-01">https://datatracker.ietf.org/doc/html/draft-barnes-mls-addl-creds-01</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-mimi-arch">[I-D.ietf-mimi-arch]</dt>
        <dd>
<span class="refAuthor">Barnes, R.</span>, <span class="refTitle">"An Architecture for More Instant Messaging Interoperability (MIMI)"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-mimi-arch-00</span>, <time datetime="2024-04-02" class="refDate">2 April 2024</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-mimi-arch-00">https://datatracker.ietf.org/doc/html/draft-ietf-mimi-arch-00</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.kohbrok-mimi-metadata-minimalization">[I-D.kohbrok-mimi-metadata-minimalization]</dt>
        <dd>
<span class="refAuthor">Kohbrok, K.</span> and <span class="refAuthor">R. Robert</span>, <span class="refTitle">"MIMI Metadata Minimalization (MIMIMI)"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-kohbrok-mimi-metadata-minimalization-00</span>, <time datetime="2024-04-05" class="refDate">5 April 2024</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-kohbrok-mimi-metadata-minimalization-00">https://datatracker.ietf.org/doc/html/draft-kohbrok-mimi-metadata-minimalization-00</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7519">[RFC7519]</dt>
        <dd>
<span class="refAuthor">Jones, M.</span>, <span class="refAuthor">Bradley, J.</span>, and <span class="refAuthor">N. Sakimura</span>, <span class="refTitle">"JSON Web Token (JWT)"</span>, <span class="seriesInfo">RFC 7519</span>, <span class="seriesInfo">DOI 10.17487/RFC7519</span>, <time datetime="2015-05" class="refDate">May 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc7519">https://www.rfc-editor.org/rfc/rfc7519</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9449">[RFC9449]</dt>
      <dd>
<span class="refAuthor">Fett, D.</span>, <span class="refAuthor">Campbell, B.</span>, <span class="refAuthor">Bradley, J.</span>, <span class="refAuthor">Lodderstedt, T.</span>, <span class="refAuthor">Jones, M.</span>, and <span class="refAuthor">D. Waite</span>, <span class="refTitle">"OAuth 2.0 Demonstrating Proof of Possession (DPoP)"</span>, <span class="seriesInfo">RFC 9449</span>, <span class="seriesInfo">DOI 10.17487/RFC9449</span>, <time datetime="2023-09" class="refDate">September 2023</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9449">https://www.rfc-editor.org/rfc/rfc9449</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</div>
</section>
</div>
<div id="acknowledgments">
<section id="appendix-A">
      <h2 id="name-acknowledgments">
<a href="#name-acknowledgments" class="section-name selfRef">Acknowledgments</a>
      </h2>
<p id="appendix-A-1">TODO acknowledge.<a href="#appendix-A-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-B">
      <h2 id="name-authors-address">
<a href="#name-authors-address" class="section-name selfRef">Author's Address</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Rohan Mahy</span></div>
<div dir="auto" class="left"><span class="org">Rohan Mahy Consulting Services</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:rohan.ietf@gmail.com" class="email">rohan.ietf@gmail.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
